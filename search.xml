<?xml version="1.0" encoding="utf-8"?>
<search>
  
    
    <entry>
      <title><![CDATA[Cocoapods ä¿®æ”¹Pod ç¼–è¯‘é€‰é¡¹]]></title>
      <url>%2F2017%2F03%2F17%2FCocoapods%20%E4%BF%AE%E6%94%B9Pod%20%E7%BC%96%E8%AF%91%E9%80%89%E9%A1%B9%2F</url>
      <content type="text"><![CDATA[å…¬å¸é¡¹ç›®ä¸€ç›´ä½¿ç”¨çš„æ˜¯ç§æœ‰Spec ä»“åº“æ¥ç®¡ç†æ¯ä¸ªä¸šåŠ¡æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—å•ç‹¬ä¸ºä¸€ä¸ªPodã€‚ä½†æ˜¯æœ€è¿‘å‘çŽ°ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å³ä½¿æ–¹æ³•å£°æ˜Žäº†éœ€è¦æœ‰è¿”å›žå€¼ï¼Œä½†æ˜¯å¦‚æžœä¸å†™return çš„è¯ï¼Œç¼–è¯‘ç«Ÿç„¶ä¹Ÿä¸ä¼šæŠ¥é”™ äºŽæ˜¯æŸ¥çœ‹ç¼–è¯‘é€‰é¡¹ å‘çŽ°target çš„Mismatched Return Type å€¼æ˜¯Yes,è€Œå¦‚æžœæ”¹æˆYes(Treat as Error) ä¹‹åŽï¼Œåˆ™ä¼šæ­£å¸¸æŠ¥é”™ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æƒ³æ–¹æ³•æ¥ä¿®æ”¹è¿™ä¸ªç¼–è¯‘é€‰é¡¹ Podspec.podspec æ–‡ä»¶æè¿°äº†ä¸€ä¸ªåº“æ˜¯æ€Žæ ·è¢«æ·»åŠ åˆ°å·¥ç¨‹ä¸­çš„ã€‚å®ƒæ”¯æŒçš„åŠŸèƒ½æœ‰ï¼šåˆ—å‡ºæºæ–‡ä»¶ã€frameworkã€ç¼–è¯‘é€‰é¡¹å’ŒæŸä¸ªåº“æ‰€éœ€è¦çš„ä¾èµ–ç­‰ã€‚æ‰€ä»¥æˆ‘ä»¬åªæœ‰ä¿®æ”¹.podspec å°±å¯ä»¥äº†ï¼ŒæŸ¥äº†ä¸‹æ–‡æ¡£ pod_target_xcconfig è¡¨ç¤ºpod æœ¬èº«è¢«ä¾èµ–æ—¶ï¼Œä¿®æ”¹çš„ç¼–è¯‘é€‰é¡¹ user_target_xcconfig è¡¨ç¤ºä¿®æ”¹ä¾èµ–pod çš„é¡¹ç›®çš„ç¼–è¯‘é€‰é¡¹ ç”¨ç¼–è¾‘å™¨æ‰“å¼€é¡¹ç›®æ–‡ä»¶Pods.xcodeprojï¼ŒæŸ¥æ‰¾è¯¥ç¼–è¯‘é€‰é¡¹çš„Keyï¼Œä¹Ÿå¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹ å‘çŽ°Key ä¸ºGCC_WARN_ABOUT_RETURN_TYPEï¼Œå€¼ä¸ºYES_ERROR&#39; æ­£è§£åœ¨.podspec æ–‡ä»¶é‡Œå¢žåŠ ä¸‹é¢è¿™è¡Œå³å¯ 1spec.pod_target_xcconfig = &#123;'GCC_WARN_ABOUT_RETURN_TYPE' =&gt; 'YES_ERROR'&#125; å‚è€ƒ æ·±å…¥ç†è§£ CocoaPodsPodspec Syntax Reference]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[æ»‘åŠ¨è§†å›¾å¯¼èˆªæŽ§åˆ¶å™¨]]></title>
      <url>%2F2017%2F02%2F28%2F%E6%BB%91%E5%8A%A8%E8%A7%86%E5%9B%BE%E5%AF%BC%E8%88%AA%E6%8E%A7%E5%88%B6%E5%99%A8%2F</url>
      <content type="text"><![CDATA[è¿™ä¸¤å¤©è¶ç€åœ¨å…¬å¸é‡Œç»§ç»­åšç€ä¸çˆ±åšçš„éœ€æ±‚çš„ç©ºéš™ï¼Œå°†å¾ˆå¤šApp å¸¸ç”¨çš„æ»‘åŠ¨è§†å›¾æŽ§åˆ¶å™¨æŒ‰ç…§è‡ªå·±çš„æƒ³æ³•é€ äº†ä¸ªè½®å­ï¼Œåœ¨è¿™è®°å½•ä¸‹æ•´ä¸ªæµç¨‹ã€‚ Demo åœ°å€GitHub æ¼”ç¤ºï¼š ä»‹ç»1.CocoaPods1pod &apos;JCPageController&apos; 2.Demo ä½¿ç”¨12345678910111213141516171819202122232425262728293031323334353637//åˆ›å»ºpageController- (JCPageContoller *)pageController&#123; if (!_pageController) &#123; _pageController = [[JCPageContoller alloc]init]; _pageController.delegate = self; _pageController.dataSource = self; [self addChildViewController:_pageController]; [self.view addSubview:_pageController.view]; _pageController.lineAinimationType = self.lineAinimationType; _pageController.scaleSelectedBar = self.scaleSelectedBar; &#125; return _pageController;&#125;- (NSInteger)numberOfControllersInPageController&#123; return count;&#125;- (NSString *)reuseIdentifierForControllerAtIndex:(NSInteger)index;&#123; return identifier;//ç”¨äºŽcontrolleré‡ç”¨&#125;- (UIViewController *)pageContoller:(JCPageContoller *)pageContoller controllerAtIndex:(NSInteger)index&#123; UIViewController *controller = [pageContoller dequeueReusableControllerWithReuseIdentifier:identifier atIndex:index];//èŽ·å–é‡ç”¨çš„controller if (!controller) &#123; //controller init &#125; return controller;&#125;- (CGFloat)pageContoller:(JCPageContoller *)pageContoller widthForCellAtIndex:(NSInteger )index&#123; return width;&#125;- (NSString *)pageContoller:(JCPageContoller *)pageContoller titleForCellAtIndex:(NSInteger)index&#123; return text;&#125; æ›´å¤šä½¿ç”¨æ–¹æ³•è¯·çœ‹Demo åŽŸç†æž„æˆä¸»è¦åˆ†ä¸¤ä¸ªéƒ¨åˆ†ï¼š ä¸Šæ–¹çš„TabBarï¼ˆUICollectionView æž„æˆï¼‰ ä¸‹æ–¹çš„å®¹å™¨ContentViewï¼ˆUIScrollView æž„æˆï¼‰ 12@property (nonatomic, strong) JCPageSlideBar *slideBar;@property (nonatomic, strong) UIScrollView *contentView; ç›®å½•ç»“æž„ æµç¨‹ é€šè¿‡æ•°æ®æºèŽ·å–å­Controller çš„æ•°é‡ï¼Œä»¥åŠç›¸åº”ç´¢å¼•ä¸ŠtabBar çš„å®½åº¦å’Œtitleã€‚ é€šè¿‡æ•°æ®æºèŽ·å–ç›¸åº”ç´¢å¼•ä¸Šçš„Controllerï¼Œå…ˆåˆ¤æ–­å¦‚æžœæœ‰ç›¸åŒidentifier çš„å¯å¤ç”¨Controllerï¼Œè‹¥æœ‰ï¼Œåˆ™è¿”å›žï¼Œå¦åˆ™åˆ›å»ºè¯¥Controllerï¼Œå­˜å…¥åˆ°ç¼“å­˜ä¸­ã€‚ å½“æ‰‹åŠ¿æ»‘åŠ¨ContentView æˆ–ç‚¹å‡»TabBar æ¥åˆ‡æ¢é¡µé¢æ—¶ï¼Œå¤„ç†ContentView ä¸ŽTabBar ä¹‹é—´çš„ååŒé—®é¢˜ã€‚ ä¸»è¦é€»è¾‘é¦–å…ˆæ˜¯é‡ç”¨Controllerï¼Œè¿™ä¸ªå¯¹æé«˜æ€§èƒ½å¾ˆé‡è¦ï¼Œæˆ‘æ˜¯å°†Controller éƒ½å­˜åˆ°controllersMap è¿™ä¸ªå­—å…¸é‡Œï¼Œç”¨ @â€œindex_identifierâ€ æ¥å½“åškeyï¼ŒåŒä¸€ä¸ªidentifier çš„Controller æœ€å¤šåˆ›å»ºä¸¤ä¸ªã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647@property (nonatomic, strong) NSMutableDictionary *controllersMap; //ç”¨äºŽä¿å­˜controllers ç”¨ @â€œindex_identifierâ€ æ¥å½“åškey valueä¸ºcontroller- (UIViewController *)dequeueReusableControllerWithReuseIdentifier:(NSString *)identifier atIndex:(NSInteger)index&#123; if (!identifier) &#123; return nil; &#125; NSInteger count = [self.dataSource numberOfControllersInPageController]; if (index &gt;= count || index &lt; 0) &#123; return nil; &#125; UIViewController *controller = nil; NSString *findKey = nil; for (NSString *key in self.controllersMap) &#123; NSArray *components = [key componentsSeparatedByString:@"_"]; NSString *indexStr = components.firstObject; NSString *identifierStr = components.lastObject; NSInteger gap = labs(indexStr.integerValue - index); if (self.didSelectBarToChangePage) &#123; //ç‚¹å‡»tabbaråˆ‡æ¢é¡µé¢ if ([identifier isEqualToString:identifierStr]) &#123; if (self.currentIndex != indexStr.integerValue) &#123; controller = self.controllersMap[key]; findKey = key; break; &#125; &#125; &#125;else&#123; //æ‰‹åŠ¿æ»‘åŠ¨åˆ‡æ¢é¡µé¢ if ([identifier isEqualToString:identifierStr] &amp;&amp; gap &gt; 1) &#123; controller = self.controllersMap[key]; findKey = key; break; &#125; &#125; &#125; if (findKey) &#123; if ([controller respondsToSelector:@selector(prepareForReuse)]) &#123; [controller performSelector:@selector(prepareForReuse)]; &#125; [self.controllersMap removeObjectForKey:findKey]; &#125;else&#123; if ([self getControllerFromMap:index]) &#123; controller = [self getControllerFromMap:index]; &#125; &#125; return controller;&#125; ä¸ºäº†æ€§èƒ½è€ƒè™‘ï¼Œåªæœ‰å½“æ¯æ¬¡æ»‘åŠ¨å³å°†å‡ºçŽ°æŸä¸ªindex å¯¹åº”çš„Controller æ—¶ï¼Œæ‰åŽ»åˆ›å»ºè¯¥Controllerï¼Œå°†å…¶add åˆ°ContentView ç›¸åº”çš„ContentOffset ä¸Šçš„ã€‚ æ‰‹åŠ¿æ»‘åŠ¨åˆ‡æ¢é¡µé¢æ—¶ï¼Œä¸»è¦é€»è¾‘åœ¨scrollViewDidScrollè¿™ä¸ªæ–¹æ³•é‡Œï¼Œå…ˆåˆ¤æ–­æ»‘åŠ¨æ–¹å‘ï¼Œç„¶åŽé…ç½®ç›¸åº”çš„Controllerã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647- (void)scrollViewDidScroll:(UIScrollView *)scrollView&#123; ... BOOL scrollToRight = YES; if (contentOffsetX - self.lastOffsetX &gt; 0) &#123; if (contentOffsetX &lt;= curControllerOriginX) &#123; return; &#125; nextPage = page &lt; totalCount - 1 ? page + 1 : totalCount - 1; &#125;else&#123; if (contentOffsetX &gt;= curControllerOriginX) &#123; return; &#125; scrollToRight = NO; page = page &lt; totalCount - 1 ? page+1 : totalCount-1; nextPage = page &gt; 0 ? page - 1 : 0; &#125; self.lastOffsetX = contentOffsetX; if (self.currentIndex != page) &#123; //é…ç½®å½“å‰æ˜¾ç¤ºçš„controller self.currentIndex = page; self.currentController = self.nextController; [self.slideBar selectTabAtIndex:self.currentIndex]; &#125; //é…ç½®ä¸‹ä¸ªå°†è¦æ˜¾ç¤ºçš„controller [self checkNeedConfigNextPage:scrollToRight nextPage:nextPage];&#125;- (void)checkNeedConfigNextPage:(BOOL)scrollToRight nextPage:(NSInteger)nextPage&#123; CGFloat contentOffsetX = self.contentView.contentOffset.x; BOOL needConfigNextPage = NO; if (scrollToRight) &#123; if (contentOffsetX &gt; self.currentIndex * self.contentView.frame.size.width) &#123; needConfigNextPage = YES; &#125; &#125;else&#123; if (contentOffsetX &lt; self.currentIndex * self.contentView.frame.size.width) &#123; needConfigNextPage = YES; &#125; &#125; if (needConfigNextPage &amp;&amp; self.nextIndex != nextPage) &#123; //é…ç½®ä¸‹ä¸€ä¸ªå³å°†æ˜¾ç¤ºçš„controller [self willDraggingToNextController:nextPage]; &#125;&#125; å½“ç‚¹å‡»tabBar åˆ‡æ¢é¡µé¢æ—¶ï¼Œä¸»è¦å®žçŽ°JCPageSlideBarDelegate ä»£ç†æ–¹æ³•ï¼Œå°†nextVCL æ”¾åœ¨å½“å‰Controller ç›¸é‚»ä½ç½®ä¸Šï¼Œå¾…æ»šåŠ¨ç»“æŸåŽåœ¨æ¢å¤çœŸæ­£ä½ç½®ã€‚ 123456789101112131415- (void)pageSlideBar:(JCPageSlideBar *)pageSlideBar didSelectBarAtIndex:(NSInteger)index&#123; ... self.selectBarIndex = index; NSInteger realIndex = self.currentIndex &lt; index ? self.currentIndex + 1 : self.currentIndex - 1; UIViewController *nextVCL = [self willDraggingToNextController:index]; if (nextVCL) &#123; //å°†nextVCL æ”¾åœ¨ç›¸é‚»ä½ç½®ä¸Šï¼Œå¾…æ»šåŠ¨ç»“æŸåŽåœ¨æ¢å¤çœŸæ­£ä½ç½® self.contentView.userInteractionEnabled = NO;//æ»šåŠ¨æœŸé—´ ä¸å…è®¸ç”¨æˆ·æ‰‹åŠ¿æ“ä½œ self.currentController = nextVCL; CGRect rect = nextVCL.view.frame; rect.origin.x = realIndex * self.contentView.frame.size.width; nextVCL.view.frame = rect; &#125; [self.contentView setContentOffset:CGPointMake(realIndex * self.contentView.frame.size.width,0) animated:YES];&#125; é»˜è®¤æä¾›äº†å››ç§line çš„åˆ‡æ¢åŠ¨ç”» 123456typedef NS_ENUM(NSUInteger, JCSlideBarLineAnimationType) &#123; JCSlideBarLineAnimationFixedWidth = 0, //å›ºå®šå®½åº¦ JCSlideBarLineAnimationDynamicWidth = 1, //åŠ¨æ€å®½åº¦ï¼Œä¸Žæ ‡é¢˜æ–‡å­—ç­‰å®½ JCSlideBarLineAnimationStretchFixedWidth = 2, //æ‹‰ä¼¸æ•ˆæžœ å›ºå®šå®½åº¦ JCSlideBarLineAnimationStretchDynamicWidth = 3, //æ‹‰ä¼¸æ•ˆæžœ åŠ¨æ€å®½åº¦ï¼Œä¸Žæ ‡é¢˜æ–‡å­—ç­‰å®½&#125;; å…¶ä¸­æ‹‰ä¼¸æ•ˆæžœéœ€è¦è®¡ç®—å½“å‰åˆ‡æ¢é¡µé¢æ»‘åŠ¨çš„progress ï¼Œä»¥æ­¤æ¥è®¡ç®—line çš„origin.x ä»¥åŠwidthã€‚ è¿™é‡Œä¹Ÿæä¾›äº†tabBar é€‰ä¸­æ”¾å¤§æ•ˆæžœä»¥åŠtitle é¢œè‰²æ¸å˜ï¼Œ,ä¸»è¦ä½¿ç”¨çš„æ˜¯CGAffineTransformMakeScaleï¼Œ 1@property (nonatomic) BOOL scaleSelectedBar;//æ˜¯å¦æœ‰é€‰ä¸­æ”¾å¤§æ•ˆæžœ 1234567891011121314151617181920212223242526- (void)scaleTitleFromIndex:(NSInteger)fromIndex toIndex:(NSInteger)toIndex progress:(CGFloat)progress&#123; if (!self.scaleSelectedBar) &#123; return; &#125; CGFloat scale = kSlideBarCellScaleSize; CGFloat currentTransform = (scale - 1) * progress; UICollectionViewCell *fromCell = [self.collectionView cellForItemAtIndexPath:[NSIndexPath indexPathForItem:fromIndex inSection:0]]; UICollectionViewCell *toCell = [self.collectionView cellForItemAtIndexPath:[NSIndexPath indexPathForItem:toIndex inSection:0]]; fromCell.transform = CGAffineTransformMakeScale(scale - currentTransform , scale - currentTransform); toCell.transform = CGAffineTransformMakeScale(1 + currentTransform, 1 + currentTransform); if (self.lineAinimationType &lt; JCSlideBarLineAnimationStretchFixedWidth) &#123; //ä¸æ˜¯æ‹‰ä¼¸æ•ˆæžœå°±ä¸ç”¨å˜é¢œè‰²äº† return; &#125; CGFloat narR,narG,narB,narA; [kTitleNormalColor getRed:&amp;narR green:&amp;narG blue:&amp;narB alpha:&amp;narA]; CGFloat selR,selG,selB,selA; [kTitleSelectedColor getRed:&amp;selR green:&amp;selG blue:&amp;selB alpha:&amp;selA]; CGFloat detalR = narR - selR ,detalG = narG - selG,detalB = narB - selB,detalA = narA - selA; UILabel *fromTitle = [fromCell viewWithTag:kSlideBarCellTitleTag]; UILabel *toTitle = [toCell viewWithTag:kSlideBarCellTitleTag]; fromTitle.textColor = [UIColor colorWithRed:selR + detalR * progress green:selG+detalG * progress blue:selB+detalB * progress alpha:selA+detalA * progress]; toTitle.textColor = [UIColor colorWithRed:narR-detalR * progress green:narG-detalG * progress blue:narB-detalB * progress alpha:narA-detalA * progress];&#125; æ€»ç»“ç”±äºŽè‡ªèº«çš„èƒ½åŠ›ä»¥åŠæ˜¯ç¬¬ä¸€ç‰ˆï¼Œå°šä¸”å­˜åœ¨å¾ˆå¤šä¸è¶³ä¹‹å¤„ï¼Œä¾‹å¦‚ä¸èƒ½è‡ªç”±çš„å®šåˆ¶åŒ–ï¼Œä»£ç æ³¨é‡Šä¸å¤Ÿï¼Œä¸€äº›æ–¹æ³•é€»è¾‘èº²èµ·æ¥ä¸å¤Ÿé¡ºç•…ï¼Œæ€»çš„æ¥è¯´è¿˜æ˜¯å¯ä»¥æ»¡è¶³åŸºæœ¬éœ€æ±‚ã€‚æ—¥åŽæœ‰æ—¶é—´å°†ä¼šç»§ç»­å®Œå–„ã€‚æ¬¢è¿Žå¤§å®¶æŒ‡å‡ºé—®é¢˜ï¼Œä¸€èµ·äº¤æµã€‚ Demo åœ°å€GitHub]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[è½®æ’­å›¾ä¸åŒå®žçŽ°æ–¹æ³• ä»¥åŠ å‘å¸ƒåˆ°Cocoapod]]></title>
      <url>%2F2017%2F02%2F20%2F%E8%BD%AE%E6%92%AD%E5%9B%BE%E5%AE%9E%E7%8E%B0%20%E4%BB%A5%E5%8F%8A%E5%8F%91%E5%B8%83%E5%88%B0Cocoapod%2F</url>
      <content type="text"><![CDATA[Demoåœ°å€github å‘¨æœ«é—²ç€æ— èŠæŠŠä½¿ç”¨ä¸¤ä¸ªUIImageView ä»¥åŠä½¿ç”¨ä¸€ä¸ªUIImageView æ¥å®žçŽ°è½®æ’­å›¾åˆ†åˆ«å†™äº†ä¸€ä¸‹ï¼Œé¡ºä¾¿è¯•äº†ä¸‹å‘å¸ƒåˆ°Cocoapodï¼Œæ€»ä½“æ¥è¯´è¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œè®°å½•ä¸‹æµç¨‹ã€‚ ä¸¤ä¸ªUIImageViewåŽŸç†å’Œä½¿ç”¨ä¸‰ä¸ªåŸºæœ¬ä¸€æ ·ï¼Œæ²¡ä»€ä¹ˆå¯ä»¥è¯´çš„ ä½¿ç”¨çš„demo1234567891011121314151617181920212223242526- (void)demo&#123; JCCarouselView *bannerView = [[JCCarouselView alloc]initWithFrame:CGRectMake(0, 64, self.view.frame.size.width, 220)]; [self.view addSubview:bannerView]; bannerView.imageUrlArr = self.imageUrlArr; bannerView.placeholderImage = [UIImage imageNamed:@"placeholder"]; //è®¾ç½®pagecontrol å›¾ç‰‡ bannerView.curPageControlImage = [UIImage imageNamed:@"Group"]; bannerView.pageControlImage = [UIImage imageNamed:@"Group1"]; //è®¾ç½®pagecontrol é¢œè‰² bannerView.pageControlColor = [UIColor whiteColor]; bannerView.curPageControlColor = [UIColor redColor]; bannerView.timeInterval = 4; bannerView.delegate = self; bannerView.clickBlock = ^(NSInteger index)&#123; NSLog(@"ç‚¹å‡»%ldå¼ å›¾ç‰‡",index); &#125;;&#125;- (void)carouselView:(JCCarouselView *)carouselView didSelectedAtIndex:(NSInteger)index&#123; NSLog(@"ç‚¹å‡»%ldå¼ å›¾ç‰‡",index);&#125; ä¸€ä¸ªUIImageViewä¸»è¦åŽŸç†æ˜¯ä½¿ç”¨CATransition è¿™ä¸ªç±»ï¼Œå¾€å›¾ç‰‡ä¸Šæ·»åŠ è½¬åœºæ•ˆæžœã€‚ å…ˆåœ¨å›¾ç‰‡ä¸Šæ·»åŠ å·¦æ»‘ä»¥åŠå³æ»‘çš„æ‰‹åŠ¿ 123456789101112131415161718- (UIImageView *)imageView&#123; if (!_imageView) &#123; _imageView = [[UIImageView alloc]initWithFrame:self.bounds]; [self addSubview:_imageView]; [_imageView setContentMode:UIViewContentModeScaleAspectFill]; _imageView.clipsToBounds = YES; _imageView.userInteractionEnabled = YES; UISwipeGestureRecognizer *leftSwipeGesture = [[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(leftSwipe:)]; leftSwipeGesture.direction = UISwipeGestureRecognizerDirectionLeft; [_imageView addGestureRecognizer:leftSwipeGesture]; UISwipeGestureRecognizer *rightSwipeGesture = [[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(rightSwipe:)]; rightSwipeGesture.direction = UISwipeGestureRecognizerDirectionRight; [_imageView addGestureRecognizer:rightSwipeGesture]; &#125; return _imageView;&#125; æ»‘åŠ¨çš„å®žçŽ°æ–¹æ³• 12345678910111213141516171819202122232425-(void)transitionAnimation:(NSInteger)direction&#123; CATransition *transition=[[CATransition alloc]init]; transition.type= kCATransitionPush;//@"rippleEffect"; BOOL right = YES; //è®¾ç½®å­ç±»åž‹ if (direction == JCCarouselDirectionLeft) &#123; transition.subtype=kCATransitionFromRight; &#125;else if (direction == JCCarouselDirectionRight) &#123; transition.subtype=kCATransitionFromLeft; right = NO; &#125; transition.duration = .25f; if (right) &#123; self.curIndex=(_curIndex + 1) % self.imageUrlArr.count; &#125;else&#123; self.curIndex=(_curIndex - 1 + self.imageUrlArr.count) % self.imageUrlArr.count; &#125; [self.imageView sd_setImageWithURL:self.imageUrlArr[self.curIndex]]; [self.imageView.layer addAnimation:transition forKey:@"KCTransitionAnimation"];&#125; è¿™ç§æ–¹æ³•çš„å±€é™åœ¨äºŽä¸èƒ½è·Ÿéšæ‰‹åŠ¿æ»‘åŠ¨ï¼Œåªè¦æ»‘åŠ¨å°±ä¼šç«‹åˆ»åˆ‡æ¢å›¾ç‰‡ï¼Œå®žç”¨æ€§ä¸å¤§ï¼Œä¸è¿‡äº†è§£ä¸‹CATransition è¿™ä¸ªç±»è¿˜æ˜¯å¾ˆæœ‰å¥½å¤„çš„ã€‚ å‘å¸ƒåˆ°Cocoapod1.æ‰“tag12git tag -a 1.0.0 -m&quot;1.0.0&quot;git push --tags 2.åˆ›å»ºé¡¹ç›®çš„podspecæ–‡ä»¶1pod spec create JCCarouselView è¿™æ—¶ä¼šç”ŸæˆJCCarouselView.podspec æ–‡ä»¶ï¼Œè¿™å°±ç›¸å½“äºŽä½ çš„åº“çš„æè¿°æ–‡ä»¶ï¼Œè¯­æ³•å‚ç…§è¿™é‡Œå¡«å†™å³å¯ 123456789101112131415161718192021222324Pod::Spec.new do |s| s.name = &quot;JCCarouselView&quot; s.version = &quot;1.0.4&quot; s.summary = &quot;ä¸¤ä¸ªUIImageViewå®žçŽ°çš„è½®æ’­banner&quot; s.homepage = &quot;https://github.com/JiachengZheng/JCCarouselView&quot; s.license = &#123; :type =&gt; &quot;MIT&quot;, :file =&gt; &quot;FILE_LICENSE&quot; &#125; s.author = &#123; &quot;zhengjiacheng&quot; =&gt; &quot;jiachengzheng@163.com&quot; &#125; s.platform = :ios, &quot;7.0&quot; s.ios.deployment_target = &quot;7.0&quot; s.source = &#123; :git =&gt; &apos;https://github.com/JiachengZheng/JCCarouselView.git&apos;, :tag =&gt; s.version &#125; s.source_files = &apos;JCCarouselView/*.&#123;h,m&#125;&apos; # s.resource = &quot;icon.png&quot; # s.resources = &quot;Resources/*.png&quot; s.public_header_files = &apos;JCCarouselView/*.h&apos; s.requires_arc = true # s.xcconfig = &#123; &quot;HEADER_SEARCH_PATHS&quot; =&gt; &quot;$(SDKROOT)/usr/include/libxml2&quot; &#125; s.dependency &apos;SDWebImage&apos;end 3.éªŒè¯podspecæ–‡ä»¶1pod spec lint JCCarouselView.podspec ä¸çŸ¥é“ä¸ºä»€ä¹ˆæ€»ä¼šæç¤ºæŠ¥é”™ 12345678910Updating spec repo `master`Validating podspec -&gt; JCCarouselView (1.0.2) - ERROR | [iOS] xcodebuild: Returned an unsuccessful exit code. You can use `--verbose` for more information. - ERROR | xcodebuild: /Users/zhengjiacheng/Library/Developer/Xcode/DerivedData/App-dvilxxenwfwalycxbchznfaznvzq/Build/Products/Release-iphonesimulator/JCCarouselView/JCCarouselView.framework/Headers/JCCarouselView.h:10:9: error: include of non-modular header inside framework module &apos;JCCarouselView.JCCarouselView&apos; [-Werror,-Wnon-modular-include-in-framework-module] - NOTE | xcodebuild: /var/folders/8j/zd9r7fv92wz32qbj6dhk70n80000gn/T/CocoaPods/Lint/App/main.m:3:9: fatal error: could not build module &apos;JCCarouselView&apos;[!] The spec did not pass validation, due to 2 errors.[!] The validator for Swift projects uses Swift 3.0 by default, if you are using a different version of swift you can use a `.swift-version` file to set the version for your Pod. For example to use Swift 2.3, run: `echo &quot;2.3&quot; &gt; .swift-version`. åŽæ¥æ”¹ä¸º 1pod spec lint JCCarouselView.podspec --use-libraries å°±å¯ä»¥äº†ï¼Œä¸å¤ªçŸ¥é“åŽŸå› ã€‚ã€‚ã€‚ å¦‚æžœå‡ºçŽ° 12345 -&gt; JCCarouselView (1.0.2)Analyzed 1 podspec.JCCarouselView.podspec passed validation. å°±ä»£è¡¨æˆåŠŸäº† 4.ä¸Šä¼ podspecé¦–å…ˆéœ€è¦æ³¨å†Œ 1pod trunk register xxxxxx@gmail.com &apos;MrSong&apos; --description=&apos;MrSong&apos; éšåŽé‚®ç®±é‡Œä¼šå‘ç¡®è®¤é‚®ä»¶ï¼Œç¡®è®¤ä»¥åŽå°±å¯ä¸Šä¼ äº†å¯é€šè¿‡ pod trunk me æŸ¥çœ‹è‡ªå·±æ˜¯å¦æ³¨å†ŒæˆåŠŸ ä¹‹åŽå°±å¯ä»¥ä¸Šä¼ äº†ï¼Œè¿™ä¸€æ­¥å¯èƒ½ä¼šæ¯”è¾ƒæ…¢ 1pod trunk push JCCarouselView.podspec --use-libraries åŽé¢è¿˜æ˜¯åŠ ä¸Šäº†--use-librariesé˜²æ­¢æŠ¥é”™ã€‚ã€‚ã€‚ å‡ºçŽ°å¦‚ä¸‹ä»£ç ä¸Šä¼ æˆåŠŸ 123456ðŸŽ‰ CongratsðŸš€ JCCarouselView (1.0.2) successfully publishedðŸ“… February 6th, 02:16ðŸŒŽ https://cocoapods.org/pods/JCCarouselViewðŸ‘ Tell your friends! 5.éªŒè¯1pod search &apos;JCCarouselView&apos; å¤§åŠŸå‘Šæˆï¼Enjoy! Demoåœ°å€github]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[AFNetworking è¸©å‘]]></title>
      <url>%2F2017%2F01%2F20%2FAFNetworking%20%E8%B8%A9%E5%9D%91%2F</url>
      <content type="text"><![CDATA[æœ€è¿‘å…¬å¸çš„é¡¹ç›®æŠŠç½‘ç»œåº“ä»ŽASIHTTPRequest å…¨éƒ¨æ›¿æ¢æˆäº†AFNetworkingï¼Œä½†æ˜¯åœ¨iOS 7ä¸Šé‡åˆ°äº†é¢‘çŽ‡å¾ˆé«˜çš„crashã€‚å…·ä½“å´©æºƒåœ¨AFURLSessionManager.hé‡Œçš„[self.mutableData appendData:data];è¿™ä¸€è¡Œ 123456- (void)URLSession:(__unused NSURLSession *)session dataTask:(__unused NSURLSessionDataTask *)dataTask didReceiveData:(NSData *)data&#123; [self.mutableData appendData:data];&#125; æ‰“å°çš„log 12malloc: *** error for object 0x633c000: pointer being freed was not allocated*** set a breakpoint in malloc_error_break to debug æ„æ€åº”è¯¥æ˜¯mutableDataåœ¨æŸå¤„è¢«é‡Šæ”¾äº†ï¼ŒäºŽæ˜¯æŸ¥æ‰¾æ‰€æœ‰ç”¨åˆ°mutableDataçš„åœ°æ–¹ 1234567891011- (void)URLSession:(__unused NSURLSession *)session task:(NSURLSessionTask *)taskdidCompleteWithError:(NSError *)error&#123;... NSData *data = nil; if (self.mutableData) &#123; data = [self.mutableData copy]; self.mutableData = nil; &#125;...&#125; åœ¨è¿™ä¸ªå›žè°ƒé‡ŒmutableData è¢«é‡Šæ”¾æŽ‰äº†ï¼Œä½†æ˜¯åœ¨iOS 7ä»¥ä¸Šçš„ç³»ç»Ÿå´æ²¡å‘çŽ°å´©æºƒï¼Œåº”è¯¥æ˜¯iOS 7é‡Œï¼ŒåŒä¸€ä¸ªtaskï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯åœ¨ä¸¤ä¸ªçº¿ç¨‹å¼‚æ­¥æ‰§è¡Œçš„ï¼Œå¯¼è‡´mutableData æå‰ç½®ä¸ºnilã€‚ è§£å†³åŠžæ³•åœ¨æ“ä½œmutableDataçš„åœ°æ–¹åŠ é”ï¼Œå¹¶ä¸”åŠ äº†ç‰ˆæœ¬åˆ¤æ–­ï¼Œå´©æºƒå°±åŸºæœ¬ä¸ä¼šå¤çŽ°äº†ã€‚ 123456789101112131415- (void)URLSession:(__unused NSURLSession *)session dataTask:(__unused NSURLSessionDataTask *)dataTask didReceiveData:(NSData *)data&#123; if ([[[UIDevice currentDevice] systemVersion] floatValue] &lt; 8.0) &#123; @synchronized (self.mutableData) &#123; if (!self.mutableData) &#123; self.mutableData = [NSMutableData data]; &#125; [self.mutableData appendData:data]; &#125; &#125;else&#123; [self.mutableData appendData:data]; &#125;&#125; 12345678910111213141516171819- (void)URLSession:(__unused NSURLSession *)session task:(NSURLSessionTask *)taskdidCompleteWithError:(NSError *)error&#123;... NSData *data = nil; if (self.mutableData) &#123; data = [self.mutableData copy]; //We no longer need the reference, so nil it out to gain back some memory. if ([[[UIDevice currentDevice] systemVersion] floatValue] &lt; 8.0) &#123;//åŠ é”ï¼Œé˜²æ­¢å´©æºƒåœ¨[self.mutableData appendData:data]; @synchronized (self.mutableData) &#123; self.mutableData = nil; &#125; &#125;else&#123; self.mutableData = nil; &#125; &#125;...&#125;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[2016å¹´ æ€»ç»“]]></title>
      <url>%2F2017%2F01%2F02%2F2016%E5%B9%B4%20%E6%80%BB%E7%BB%93%2F</url>
      <content type="text"><![CDATA[2016å¹´ï¼Œæˆ‘çš„23å²ã€‚è¿™ä¸€å¹´å‘ç”Ÿäº†å¾ˆå¤šï¼Œæ— è®ºåœ¨å·¥ä½œä¸Šã€è¿˜æ˜¯åœ¨ç”Ÿæ´»ä¸Šï¼Œè¿™éƒ½å°†æ˜¯æ„ä¹‰é‡å¤§çš„ä¸€å¹´ã€‚çŽ°åœ¨æ˜¯å…ƒæ—¦å‡æœŸçš„æœ€åŽä¸€å¤©ï¼Œè‡ªå·±åœ¨å®¶ï¼Œè¿˜æœ‰ä¸€æ¡é‡‘æ¯›ï¼Œä¹–ä¹–ã€‚è™½ç„¶æŠŠå…¬å¸çš„ç”µè„‘å¸¦å›žäº†å®¶ï¼ŒåŽŸæœ¬æ˜¯æƒ³åœ¨å®¶å¯ä»¥å¥½å¥½å†™å†™ä»£ç ï¼Œä¸è¦è’åºŸæ—¶é—´ï¼Œæ¯•ç«Ÿæœ€è¿‘çš„éœ€æ±‚å¤šçš„å¯ä»¥ï¼Œç„¶è€ŒæŽ’æœŸçš„æ—¶é—´å´æ²¡æœ‰å¤šä¹…ï¼Œä½†æ˜¯ï¼Œä¸€ä¸ªäººåœ¨å®¶å´æ— å¿ƒç¼–ä»£ç ã€‚2016å°±è¿™ä¹ˆä¸çŸ¥ä¸è§‰åœ°è¿‡åŽ»äº†ï¼Œä»Žå°åˆ°å¤§ä¹Ÿæ²¡æœ‰å†™æ—¥è®°ï¼Œå†™æ€»ç»“çš„ä¹ æƒ¯ï¼Œå¯¼è‡´å¾ˆå¤šçš„äº‹æƒ…å‘ç”Ÿè¿‡äº†ä¹Ÿå°±å¿˜äº†ï¼Œä¹Ÿæ²¡æœ‰ä»Žä¸­æ€»ç»“ã€åæ€ï¼Œæ‰€ä»¥å†³å¿ƒå†™ç‚¹ä¸œè¥¿ï¼Œç®—æ˜¯è®°å½•è‡ªå·±çš„2016å¹´ï¼Œå±•æœ›2017å§ã€‚ å‰è¨€å‰ä¸€æ®µæ—¶é—´å¼€å§‹å­¦ç€ç”¨Markdown æ¥å†™ç¬”è®°ï¼Œç”¨GitHub ç”Ÿæˆè‡ªå·±çš„åšå®¢ï¼Œä¹Ÿä¼šåœ¨ç®€ä¹¦ä¸ŠåŒæ­¥è‡ªå·±çš„æ–‡ç« ï¼Œå¸Œæœ›ä»¥æ­¤push ä¸‹è‡ªå·±åŽ»è®°å½•é‡åˆ°çš„é—®é¢˜ï¼Œä»¥åŠåˆ†äº«è‡ªå·±çš„å¿ƒå¾—ã€‚çœ‹åˆ°ç®€ä¹¦ä¸Šçš„é˜…è¯»é‡ä»¥åŠç‚¹èµžæ•°ä¸€å¤©å¤©åœ¨å¢žåŠ ï¼Œè™½ç„¶è¿˜æ˜¯å¾ˆå°‘ï¼Œä¸è¿‡è¿™ä¹Ÿæ˜¯å¾ˆæ»¡è¶³çš„ï¼Œæ„Ÿè§‰è‡ªå·±å†™çš„ä¸œè¥¿è¢«åˆ«äººè®¤å¯ï¼Œå¸Œæœ›ä»¥åŽèƒ½æ›´å¤šçš„è¾“å‡ºæ›´æœ‰ä»·å€¼çš„æ–‡ç« ã€‚ å·¥ä½œåœ¨å…¬å¸ä»Žå®žä¹ ä¸€ç›´åˆ°çŽ°åœ¨å·®ä¸å¤š2å¹´äº†ï¼Œåº†å¹¸è‡ªå·±èµ¶ä¸Šäº†iOS è¡Œä¸šå¸‚åœºçš„å°¾å·´ï¼Œä¹Ÿåº†å¹¸åª³å¦‡å„¿èƒ½ä¸€èµ·è¢«å½•ç”¨ï¼Œèƒ½ä¸€èµ·å·¥ä½œï¼Œä¸€èµ·ä¸Šä¸‹ç­ï¼Œè™äº†å¤šå°‘å•èº«æ±ªã€‚è™½ç„¶æœ€è¿‘iOS è¡Œæƒ…å¾ˆä¸å¥½ï¼Œä½†æˆ‘è®¤ä¸ºè¿™åªæ˜¯å¯¹åˆå­¦è€…çš„è¦æ±‚è¶Šæ¥è¶Šé«˜ï¼Œæˆ‘ç›¸ä¿¡ä»¥è‡ªå·±çš„èƒ½åŠ›ï¼Œè¿˜æ˜¯èƒ½å¤Ÿæ‰¾åˆ°ä¸€ä»½ä¸é”™çš„å·¥ä½œã€‚ åœ¨å¹³å¸¸åšä¸šåŠ¡éœ€æ±‚ä¸Šï¼Œè·Ÿç€æˆ‘ä»¬è€å¤§å­¦äº†ä¸å°‘ä¸œè¥¿ï¼Œå¯¹æ•´ä¸ªé¡¹ç›®å„ä¸ªæ¨¡å—ä¹Ÿè¶Šæ¥è¶Šç†Ÿæ‚‰ï¼Œåœ¨æ•´ä½“é¡¹ç›®æž¶æž„ç†è§£ä¸Šä¹Ÿæœ‰ä¸€å®šç¨‹åº¦çš„æé«˜ã€‚åˆšæ¥å…¬å¸ç”±äºŽåšçš„éœ€æ±‚å¾ˆå°‘ï¼Œè§‰å¾—å¾ˆç„¦è™‘ï¼Œæ•´å¤©çœ‹åšå®¢ï¼Œåšè‡ªå·±çš„demoï¼ŒåŽæ¥éœ€æ±‚å¤šäº†ï¼Œåˆå¼€å§‹è®¤ä¸ºå¤©å¤©åšä¸šåŠ¡éœ€æ±‚å¯¹è‡ªå·±çš„æŠ€æœ¯æ°´å¹³æé«˜ä¸äº†å¤ªå¤šï¼Œä¹Ÿå¾ˆç„¦è™‘ã€‚åŽæ¥è‡ªå·±ä¹Ÿæƒ³æ˜Žç™½äº†ï¼ŒæŠ€æœ¯éœ€è¦è‡ªå·±ä¸€ç‚¹ç‚¹ç§¯ç´¯ï¼Œåšä¸šåŠ¡éœ€æ±‚ä¹Ÿä¸€æ ·ï¼Œèƒ½æŠŠéœ€æ±‚åšçš„å¾ˆå¥½ï¼Œä¹Ÿæ˜¯ä¸€ä»¶å¾ˆéš¾çš„äº‹æƒ…ã€‚éœ€è¦æŠŠä»£ç å†™çš„å°½é‡ä¼˜é›…ï¼Œæ˜“äºŽç»´æŠ¤ï¼Œä¿®æ”¹ï¼Œé€‚åº”ä¸åŒçš„éœ€æ±‚å˜æ›´ã€‚æ²¡æœ‰å¤ªå¤šéœ€æ±‚çš„æ—¶å€™ä¹Ÿä¸èƒ½å·æ‡’ï¼Œå¤šçœ‹çœ‹ä¸€äº›å¼€æºçš„ä»£ç ï¼Œè¯•ç€è‡ªå·±æ¨¡ä»¿ç€å†™å‡ºæ¥ã€‚ æœ€è¿‘å†™çš„éœ€æ±‚æ¶‰åŠåˆ°äº†è‡ªå·±åœ¨å®žä¹ æœŸå†™çš„æ¨¡å—çš„ä»£ç ï¼Œç”±äºŽåˆšæ¥å…¬å¸ï¼Œç¬¬ä¸€æ¬¡æŽ¥è§¦ä¼ä¸šçº§çš„ä»£ç ï¼Œå•¥ä¹Ÿä¸æ‡‚ï¼ŒçŽ°åœ¨å›žå¤´çœ‹æ¥è‡ªå·±å½“åˆå†™çš„ä»£ç ç®€ç›´æ¶å¿ƒåˆ°ä¸è¡Œï¼Œè¶ç€åšéœ€æ±‚çš„é—´éš™ï¼ŒæŠŠæ•´ä¸ªæ¨¡å—çš„ä»£ç é‡æž„äº†ä¸€éï¼ŒçŽ°åœ¨çœ‹çš„è¦èˆ’æœå¤šäº†ï¼Œä¸è¿‡å†è¿‡ä¸¤ä¸ªæœˆï¼Œä¼°è®¡å›žå¤´å†çœ‹å¯èƒ½è¿˜æ˜¯è§‰å¾—æ¶å¿ƒã€‚ ç”±äºŽå…¬å¸å¤ªæŠ ï¼Œåªé…å¤‡äº†ä¸€å°13å¯¸çš„pro ï¼Œå±å¹•å¤ªå°ï¼ŒäºŽæ˜¯è‡ªå·±æŽè…°åŒ…ä¹°äº†ä¸€å°DELL P2415Q 4k 23å¯¸çš„æ˜¾ç¤ºå™¨ï¼ŒçŽ°åœ¨åŒå±å·¥ä½œæ•ˆçŽ‡ä»¥åŠå¹¸ç¦æ„Ÿéƒ½å¤§å¤§æå‡ï¼ŒåŠ ä¸Šæ•´æ´çš„æ¡Œé¢ï¼Œæ¯å¤©ä¸Šç­çš„å¿ƒæƒ…ä¹Ÿä¼šå˜å¥½ï¼Œä¹Ÿæœ‰åŠ©äºŽä»£ç çš„æ•´æ´æ€§ã€‚æ¯å¤©ä¸‹ç­çš„æ—¶å€™ä¹ŸåšæŒæŠŠæ¤…å­æŽ¨å›žåˆ°æ¡Œå­é‡Œé¢ï¼Œè¿™æ ·ä¹Ÿä¸Žäººæ–¹ä¾¿ã€‚å¹¶ä¸”çŽ°åœ¨ä¹Ÿå…»æˆäº†ä¹°æ­£ç‰ˆçš„ä¹ æƒ¯ï¼Œçœ‹åˆ°å¥½çš„è½¯ä»¶ï¼Œä¼šä¸çŠ¹è±«ç›´æŽ¥ä¹°ä¸‹ï¼Œä¸å†ä¸ºäº†ç›—ç‰ˆæŠ˜è…¾ï¼Œç›´æŽ¥äº«å—æ­£ç‰ˆå¸¦æ¥çš„ä¾¿æ·ã€‚ ç”Ÿæ´» ä»Šå¹´ï¼Œæˆ‘ç»“æŸäº†å•èº«ç”Ÿæ´»ï¼Œåœ¨5.27å·é¢†äº†è¯ï¼Œ6æœˆä»½è¯·äº†å©šå‡å’Œåª³å¦‡å„¿ä¸€èµ·åŽ»äº†è¶Ÿé©¬å°”ä»£å¤«ï¼Œå› ä¸ºè¿™æ˜¯å¥¹å°æ—¶å€™çš„æ¢¦æƒ³ã€‚è¿™æ˜¯ç¬¬ä¸€æ¬¡å‡ºå›½ï¼Œåäº†å¾ˆé•¿æ—¶é—´çš„é£žæœºï¼ŒçŽ°åœ¨æƒ³èµ·åœ¨é©¬å°”ä»£å¤«çš„æ—¥å­ï¼Œæ„Ÿè§‰å¾ˆä¸çœŸå®žï¼Œå¸Œæœ›ä»¥åŽè¿˜æœ‰æœºä¼šåŽ»çŽ©ã€‚ å¹´åˆæ—¶ï¼Œç‰¹åœ°åäº†8ä¸ªå°æ—¶æ±½è½¦ä»Žæ²ˆé˜³å¸¦å›žäº†ä¸€åªå°é‡‘æ¯›ï¼Œå«åšä¹–ä¹–ã€‚ä»Žæ­¤å¼€å§‹äº†æˆ‘çš„é“²å±Žä¹‹æ—…ï¼Œåˆšå¸¦å›žå®¶è¿˜ä¸åˆ°ä¸¤ä¸ªæœˆï¼ŒçŽ°åœ¨å·²ç»æ•´æ•´ä¸€å²äº†ï¼ŒçŽ°åœ¨å°±èººåœ¨æˆ‘çš„è„šåº•ä¸‹ç¡è§‰å‘¢ã€‚ä»Žåˆšåˆ°å®¶æ¯å¤©æ™šä¸ŠæŠ˜è…¾æˆ‘åˆ°çŽ°åœ¨åœ¨å®¶å·²ç»è€å®žå¤šäº†ï¼Œå°±æ˜¯ä¸€å‡ºåŽ»çŽ©è¿˜æ˜¯ç–¯çš„ä¸è¡Œï¼Œå±žäºŽæ’’æ‰‹æ²¡ç±»åž‹ã€‚çŽ°åœ¨æ¯å¤©æ—©ä¸ŠåŸºæœ¬ä¸éœ€è¦é—¹é’Ÿï¼Œ8ç‚¹å‡†æ—¶è¢«å®ƒå«é†’ï¼Œå¤šå†·éƒ½å¾—å¸¦å‡ºåŽ»æºœä¸¤åœˆã€‚å“Žï¼Œè‡ªå·±å†³å®šå…»çš„ç‹—ï¼Œè·ªç€ä¹Ÿè¦æºœå®Œå®ƒã€‚ä¸è¿‡ä¹–ä¹–è¿˜æ˜¯å¸¦æ¥äº†å¾ˆå¤šæ¬¢ä¹ï¼Œæ¯å¤©å›žå®¶å®ƒéƒ½å…´å¥‹åœ°æ‰‘å‘æˆ‘ä»¬ï¼Œå¸Œæœ›å®ƒèƒ½è¿™ä¹ˆä¸€ç›´å¥å¥åº·åº·ï¼Œå¿«å¿«ä¹ä¹åœ°åº¦è¿‡ä¸€ç”Ÿã€‚ 10æœˆä»½åœ¨ä¸¾åŠžäº†ä¸€åœºè‰åªå©šç¤¼ï¼Œåªé‚€è¯·äº†åŒå­¦ã€‚è™½ç„¶åˆ°åœºçš„äººä¸å¤šï¼Œå¤§å®¶éƒ½è·‘åˆ°å…¨å›½ä¸–ç•Œå„åœ°ï¼Œæœ‰äº›äººç”šè‡³å¯èƒ½è¿™è¾ˆå­ä¹Ÿæ²¡æœ‰äº¤é›†äº†ï¼Œä½†æ˜¯è¿˜æ˜¯å¾ˆæ„Ÿè°¢èƒ½åˆ°åœºæ¥çš„äººã€‚è‰åªå©šç¤¼ä¹Ÿæ˜¯æ»¡è¶³äº†åª³å¦‡çš„æ„¿æœ›ï¼Œå¸Œæœ›è‡ªå·±èƒ½å±¥è¡Œè‡ªå·±çš„è¯ºè¨€ï¼Œç»å¸¸å¸¦åª³å¦‡å‡ºåŽ»çŽ©ï¼Œåƒå¥½åƒçš„ï¼Œä¸€ç›´éƒ½å¹¸ç¦ç€ã€‚ çŽ°åœ¨åœ¨åŒ—äº¬ç§Ÿçš„æ˜¯è‡ªå¦‚ï¼Œç¦»å…¬å¸ä¸åˆ°3å…¬é‡Œçš„åœ°æ–¹ï¼Œä¸€ä¸ªæœˆ3000ï¼Œè™½ç„¶æŒºè´µï¼Œä½†èŠ‚çœäº†ä¸Šä¸‹ç­çš„æ—¶é—´ï¼Œè§‰å¾—è¿˜æ˜¯å¾ˆå€¼çš„ï¼Œä¸å¿…æ¯å¤©æŒ¤åœ°é“ï¼Œå¯ä»¥ç¡æ‡’è§‰ã€‚å†¬å¤©ä¸‹ç­å«Œå†·ä¹Ÿå¯ä»¥éšä¾¿æ‰“è½¦å›žå®¶ï¼Œä¸å¿…å¿ƒç–¼æ‰“è½¦é’±ã€‚ç­‰æˆ‘å¼Ÿä»Šå¹´å¤§å››æ¯•ä¸šäº†æ‰“ç®—æ•´ç§Ÿä¸€å¥—ä¸¤å±…ï¼Œè¿™æ ·ç”Ÿæ´»ä¸Šä¼šæ¯”è¾ƒæ–¹ä¾¿ï¼Œè‡³å°‘ä¹–ä¹–æœ‰äººå¸¦äº†ï¼Œå“ˆå“ˆã€‚ é˜…è¯»ä»Šå¹´éš¾å¾—ä¹°äº†ä¸€ä¸ªkindle ï¼Œæƒ³ç£ä¿ƒè‡ªå·±å¤šè¯»è¯»ä¹¦ï¼Œä¸è¿‡å¥½åƒä¹Ÿæ²¡è¯»å¤šå°‘ï¼ŒçŽ°åœ¨ä¹Ÿå¿«ç§¯ç°äº†ï¼Œå¸Œæœ›2017å¹´èƒ½å¤šè¯»ç‚¹ä¹¦ï¼Œæé«˜è‡ªå·±çš„å†…åœ¨ã€‚åˆ—ä¸€ä¸‹ä»Šå¹´è¯»çš„ä¹¦ï¼š ã€Šä¸‰ä½“ã€‹ä¸‰éƒ¨æ›² ã€Šè¿½é£Žç­çš„äººã€‹ ã€Šæ— å£°å‘Šç™½ã€‹ ã€Šé˜¿å¼¥é™€ä½›ä¹ˆä¹ˆå“’ã€‹ ã€Šä¹–ï¼Œæ‘¸æ‘¸å¤´ã€‹ ã€Šè§£å¿§æ‚è´§åº—ã€‹ ã€Šç™½å¤œè¡Œã€‹ ã€Šå«Œç–‘äººxçš„çŒ®èº«ã€‹ ã€ŠEffective Objective-C 2.0ã€‹ ã€ŠiOS å¼€å‘è¿›é˜¶ã€‹ ã€ŠiOS ç¼–ç¨‹ã€‹ è¿åŠ¨ä¸çŸ¥ä¸è§‰å·²ç»æ­¥å…¥èŒåœºä¸¤å¹´äº†ï¼Œæ¯•ä¸šäº†ä»¥åŽå°±å¾ˆéš¾å†æ‰¾åˆ°èƒ½å¾ˆçˆ½åœ°åœ¨ä¸€èµ·æ‰“çƒçš„çƒå‹äº†ï¼Œç¯®çƒä¹Ÿæ¸æ¸è’åºŸäº†ã€‚å…¬å¸é‡Œè™½ç„¶ä¹Ÿæœ‰äººæ‰“ï¼Œä½†ä¸å¤šï¼Œæ°´å¹³ä¹Ÿä¸€èˆ¬ï¼Œåªèƒ½å‘¨æœ«å’Œæˆ‘å¼Ÿåœ¨ä»–å­¦æ ¡é‡Œæ‰“çƒäº†ã€‚çŽ°åœ¨çš„èº«ä½“æ—©å·²ä¸å¤å½“å¹´ï¼Œä½†è¿˜æ˜¯ä¼šä¸æœè¾“çš„æ‰“ä¸‹åŽ»ï¼Œå¶å°”ä¹Ÿä¼šæƒŠè‰³ä¸€ä¸‹ã€‚çŽ°åœ¨ä¹Ÿåªæœ‰æ‰“ç¯®çƒèƒ½ç—›å¿«çš„è¿åŠ¨ä¸€ä¸‹äº†ï¼Œå¹³å¸¸å°±æ˜¯æ—©æ™šçš„é›ç‹—ï¼Œåˆ¶å®šçš„æ­¥æ•°ç›®æ ‡æ˜¯8000æ­¥ã€‚åœ¨å…¬å¸ç»„ç»‡çš„æŠ•ç¯®æ¯”èµ›ä¸­ï¼Œæˆ‘å’Œåª³å¦‡å„¿è¿˜ä¸€èµ·å‚åŠ ï¼Œæœ€åŽå¾—äº†ç¬¬ä¸€åï¼Œå¥–å“æ˜¯å°ç±³æ‰‹çŽ¯å’Œä¸€ä¸ªç¯®çƒï¼Œè¿˜æ˜¯å¾ˆéª„å‚²çš„ï¼Œæƒ³å½“å‰åœ¨å¤§å­¦çš„æ—¶å€™æˆ‘ä»¬ä¿©ä¹Ÿå‚åŠ äº†ç¯®çƒæ¯”èµ›è¿˜æ‹¿äº†ç¬¬äºŒã€‚å…¬å¸é‡Œè¿˜æœ‰ä¹’ä¹“çƒå°ï¼Œåˆä¼‘åƒå®Œé¥­æœ‰æ—¶é—´å°±ä¼šæ‹–ç€åª³å¦‡é™ªæˆ‘æ‰“ä¹’ä¹“çƒï¼Œè™½ç„¶æŠ€æœ¯å¾ˆä¸€èˆ¬ï¼Œä½†æ˜¯ä¹Ÿä¼šä¸æ–­åœ°ç»ƒä¹ ï¼Œä¸æ–­çš„è¿›æ­¥ã€‚ ç›®æ ‡ &amp; å±•æœ› ç»ƒå­—ï¼Œè‡ªå·±çš„å­—å†™çš„å¤ªå·®äº†ï¼Œæ˜¯æ—¶å€™è¯¥ç»ƒç»ƒå­—äº† è‹±è¯­ï¼Œç¼–ç¨‹éœ€è¦è‹±è¯­ï¼Œä»¥åŽå‡ºå›½çŽ©è¿˜å¾—é è‹±è¯­ è¯»ä¹¦ï¼ŒæŠŠkindle åˆ©ç”¨èµ·æ¥ è¿åŠ¨ï¼Œç¯®çƒã€ä¹’ä¹“çƒ åœ¨GitHub ä¸Šèƒ½æœ‰èƒ½æ‹¿å¾—å‡ºæ‰‹çš„å¼€æºé¡¹ç›®ã€‚ é¡¹ç›®é‡ŒUICollectionViewä½¿ç”¨æ¡†æž¶ æ¨ªåˆ’ç»„ä»¶ å­¦ä¹ å¼€æºçš„ä»£ç ï¼ŒYYKitã€SDWebImage åˆ·åˆ·LeetCodeï¼Œæ•´ç†åˆ°GitHub ä¸Š è¸å®žåšéœ€æ±‚ï¼Œäº‰å–åšåˆ°æœ€å¥½ å†™æœ‰ä»·å€¼çš„åšå®¢ æ—…æ¸¸ï¼Œè‡³å°‘ä¸¤ä¸ªåŸŽå¸‚ æ¶¨è–ªä¸¤æ¬¡ å­¦ä¹ Pythonä»¥åŠShell åŠ æ·±å¯¹GCDã€Runloopã€Runtimeã€é”çš„ç†è§£]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[iOS é¢è¯•]]></title>
      <url>%2F2016%2F12%2F24%2F%E9%9D%A2%E8%AF%95%2F</url>
      <content type="text"><![CDATA[å‰ä¸€é˜µåœ¨è¶£ç›´æ’­å¹³å°ä¸Šçœ‹äº†æˆ‘å°±å«Sunnyæ€Žä¹ˆäº† å¤§ç¥žçš„iOS é¢è¯•å°ç¶ç›´æ’­ï¼Œæ€»ç»“ä¸‹ç›´æ’­çš„å†…å®¹ã€‚ ç®€åŽ†ä¸­çš„é—®é¢˜1.é¡¹ç›®æè¿°è¿‡äºŽç®€å•å®½æ³› é¡¹ç›®è§„æ¨¡ï¼Ÿ ä½ åœ¨å…¶ä¸­çš„èŒè´£ è¯¦ç»†ä»‹ç»ä½¿ç”¨çš„æŠ€æœ¯ é‡åˆ°çš„é—®é¢˜ã€å‘ä»¥åŠå¦‚ä½•è§£å†³çš„ï¼Ÿ 2.ä¸“ä¸šæŠ€èƒ½å‰ç¯‡ä¸€å¾‹ åœ¨åˆ—ä¸¾æŠ€æœ¯åè¯æ—¶æœ€å¥½å†™å‡ºç”¨è¿™ä¸ªæŠ€æœ¯å¹²äº†ä»€ä¹ˆï¼Ÿ æ¯”å¦‚â€œç†Ÿç»ƒåº”ç”¨Objc runtime æŠ€æœ¯ï¼Œæ›¾ä½¿ç”¨å®ƒåšäº†ViewController è¿›å…¥å’Œé€€å‡ºæ—¶çš„AOP åŸ‹ç‚¹â€ 3.æ ¼å¼ã€æ‹¼å†™ã€ç»†èŠ‚ Object-C Foudation ios xCode 4.æä¾›æ›´å¤šçš„ä¿¡æ¯æ¥ä½“çŽ°ä½ çš„ç‰¹åˆ« Blog GitHub æŠ€æœ¯æŽ¢ç´¢ å¯¹æŠ€æœ¯çš„ä¸ªäººç†è§£ åšè¿‡ä»€ä¹ˆæœ‰æ„æ€çš„äº‹å„¿ æˆ‘å°±å«Sunnyæ€Žä¹ˆäº† çš„ä¸€èˆ¬å¥—è·¯ æœ€è¿‘çš„å·¥ä½œï¼ŒAppï¼Œè´Ÿè´£å“ªäº›æ¨¡å—ï¼ˆè€ƒå¯Ÿå‰ä¸€ä»½å·¥ä½œçš„éš¾åº¦ï¼‰ æ‰¾ä¸ªæœ€ç†Ÿæ‚‰çš„ä¸šåŠ¡ï¼Œæè¿°ä¸€ä¸‹è®¾è®¡ç»“æž„ï¼ŒUIå±‚çº§ï¼ŒæŽ§ä»¶çš„ä½¿ç”¨ï¼Œå¸ƒå±€ï¼Œäº¤äº’æ•ˆæžœç­‰ï¼ˆè€ƒå¯ŸåŸºæœ¬ä¸šåŠ¡èƒ½åŠ›ï¼Œç†Ÿç»ƒç¨‹åº¦ï¼Œè´¨é‡ï¼‰ è€ƒå¯Ÿå‡ ä¸ªåŸºç¡€çš„é—®é¢˜ï¼Œå¦‚å†…å­˜ç®¡ç†ï¼Œå¤šçº¿ç¨‹ ä»Žç®€åŽ†é‡Œç†Ÿç»ƒæˆ–æŽŒæ¡çš„æŠ€æœ¯ä¸­æ‰¾å‡ ä¸ªæ·±èŠ æ‰¾é¢è¯•è€…ç ”ç©¶è¿‡çš„ï¼Œæœ‰å¿ƒå¾—æˆ–ç†Ÿç»ƒçš„ä¸œè¥¿èŠ è€ƒè™‘æ›´æ·±åº¦çš„é—®é¢˜ æ²Ÿé€šæ˜¯å¦é¡ºç•… å‡ ä¸ªé¢è¯•é¢˜property @property èƒ½ä½¿ç”¨å“ªäº›å…³é”®å­—åŠä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ ç­”ï¼š å±žæ€§ ä½œç”¨ strong é‡Šæ”¾æ—§å¯¹è±¡å°†æ—§å¯¹è±¡çš„å€¼èµ‹äºˆè¾“å…¥å¯¹è±¡ï¼Œå†æé«˜è¾“å…¥å¯¹è±¡çš„ç´¢å¼•è®¡æ•°ä¸º1 weak weakä¸å¢žåŠ å¯¹å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ï¼Œä¹Ÿä¸æŒæœ‰å¯¹è±¡ï¼Œå› æ­¤ä¸èƒ½å†³å®šå¯¹è±¡çš„é‡Šæ”¾ã€‚å®ƒæ¯”assignå¤šäº†ä¸€ä¸ªåŠŸèƒ½ï¼Œå½“å¯¹è±¡æ¶ˆå¤±åŽè‡ªåŠ¨æŠŠæŒ‡é’ˆå˜æˆnil assign ç®€å•èµ‹å€¼ï¼Œä¸æ›´æ”¹ç´¢å¼•è®¡æ•°ï¼Œé€‚ç”¨äºŽåŸºç¡€æ•°æ®ç±»åž‹ï¼ˆNSInteger CGFloatï¼‰å’ŒCæ•°æ®ç±»åž‹ï¼ˆint float double char ç­‰ï¼‰ç®€å•æ•°æ®ç±»åž‹ copy å¯¹åº”mutableCopyã€‚æ­¤å±žæ€§åªå¯¹é‚£äº›å®žè¡Œäº†NSCopyingåè®®çš„å¯¹è±¡ç±»åž‹æœ‰æ•ˆã€‚æ ¹æ®è°ƒç”¨ç±»åž‹ä¸åŒï¼Œå†³å®šæ˜¯æ·±æ‹·è´è¿˜æ˜¯æµ…æ‹·è´ï¼Œä¸€èˆ¬éƒ½æ˜¯æµ…æ‹·è´ï¼Œåªå¤åˆ¶äº†æŒ‡é’ˆï¼Œå†…å®¹è¿˜æ˜¯åŒä¸€ä»½ atomic å’Œ nonatomicç”¨æ¥å†³å®šç¼–è¯‘å™¨ç”Ÿæˆçš„getterå’Œsetteræ˜¯å¦ä¸ºåŽŸå­æ“ä½œï¼Œatomic è®¾ç½®æˆå‘˜å˜é‡çš„@propertyå±žæ€§æ—¶ é»˜è®¤ä¸ºæ˜¯atomic æä¾›çº¿ç¨‹å®‰å…¨ã€‚åœ¨å¤šçº¿ç¨‹çŽ¯å¢ƒä¸‹ï¼ŒåŽŸå­æ“ä½œæ˜¯å¿…è¦çš„å¦åˆ™ä¼šå¼•èµ·é”™è¯¯çš„ç»“æžœã€‚ nonatomic éžåŽŸå­æ€§è®¿é—®å¯¹äºŽå±žæ€§èµ‹å€¼çš„æ—¶å€™ä¸åŠ é”ï¼Œå¤šçº¿ç¨‹å¹¶å‘è®¿é—®ä¼šæé«˜æ€§èƒ½ï¼Œå¦‚æžœä¸åŠ æ­¤å±žæ€§åˆ™é»˜è®¤æ˜¯ä¸¤ä¸ªè®¿é—®æ–¹æ³•éƒ½ä¸ºåŽŸå­åž‹äº‹åŠ¡è®¿é—®ã€‚ readonly æ­¤æ ‡è®°è¯´æ˜Žå±žæ€§æ˜¯åªè¯»çš„ readwrite æ­¤æ ‡è®°è¯´æ˜Žå±žæ€§ä¼šè¢«å½“æˆè¯»å†™çš„ è¿™ä¹Ÿæ˜¯é»˜è®¤çš„å±žæ€§ unsafe_unretained è·Ÿweakç±»ä¼¼ï¼Œå£°æ˜Žä¸€ä¸ªå¼±å¼•ç”¨ï¼Œä½†æ˜¯å½“å¼•ç”¨è®¡æ•°ä¸º0æ—¶ï¼Œå˜é‡ä¸ä¼šè‡ªåŠ¨è®¾ç½®ä¸ºnil getter æŒ‡å®š get æ–¹æ³•ï¼Œå¹¶éœ€è¦å®žçŽ°è¿™ä¸ªæ–¹æ³•ã€‚å¿…é¡»è¿”å›žä¸Žå£°æ˜Žç±»åž‹ç›¸åŒçš„å˜é‡ï¼Œæ²¡æœ‰å‚æ•° setter æŒ‡å®š set æ–¹æ³•ï¼Œå¹¶éœ€è¦å®žçŽ°è¿™ä¸ªæ–¹æ³•ã€‚å¸¦ä¸€ä¸ªä¸Žå£°æ˜Žç±»åž‹ç›¸åŒçš„å‚æ•°ï¼Œæ²¡æœ‰è¿”å›žå€¼ï¼ˆè¿”å›žç©ºå€¼ï¼‰ ä¸‹é¢è¿™4ç§å†™æ³•çš„åŒºåˆ« 1234@property (nonatomic, strong) NSArray *array0;@property (nonatomic, copy) NSArray *array1;@property (nonatomic, strong) NSMutableArray *array2;@property (nonatomic, copy) NSMutableArray *array3; ç­”ï¼šarray0å¦‚æžœä¼ è¿›æ¥çš„æ˜¯mutableArray ï¼Œå¦‚æžœé‡Œé¢å…ƒç´ è¢«æ”¹å˜çš„è¯ï¼Œä¼šå¯èƒ½å‡ºçŽ°é—®é¢˜ï¼›array1æ ‡å‡†å†™æ³•ï¼Œå½“ä¼ ç»æ¥çš„æ˜¯mutableArræ—¶ï¼Œä¼šå˜æˆä¸å¯å˜ç‰ˆæœ¬ï¼Œä½†é‡Œé¢å…ƒç´ ä¸ä¼šå¤åˆ¶ä¸€ä»½ï¼Œéƒ½æ˜¯æµ…æ‹·è´ï¼›array2æ˜¯æ ‡å‡†å†™æ³•ï¼›array3å½“è®¾ç½®æ—¶ï¼Œä¼šè¢«å˜æˆä¸å¯å˜ç‰ˆæœ¬ï¼ŒåŽç»­å¦‚æžœè°ƒç”¨mutableArrçš„æ¶ˆæ¯ï¼Œä¼šå¯¼è‡´crashï¼› åŸºæœ¬å†…å­˜ç®¡ç†ä¸‹é¢å¯¹è±¡åˆ†åˆ«åœ¨ä»€ä¹ˆæ—¶å€™é‡Šæ”¾ï¼Ÿ 1234567891011- (void)ARCProblem&#123; id obj0 = @"sunny"; __weak id obj1 = obj0; id obj2 = [NSObject new]; __weak id obj3 = [NSObject new]; &#123; id obj4 = [NSObject new]; &#125; __autoreleasing id obj5 = [NSObject new]; __unsafe_unretained id obj6 = self;&#125; obj0 æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ†é…åœ¨å¸¸é‡åŒºï¼Œæ‰€ä»¥ä¸ä¼šé‡Šæ”¾ obj1 æ˜¯weak æŒ‡å‘obj0 ä¼šç”Ÿæˆä¸€ä¸ªmap æ¥æ˜ å°„å¯¹è±¡å’ŒæŒ‡é’ˆçš„å…³ç³»ï¼Œå½“å¯¹è±¡é‡Šæ”¾æ—¶ï¼Œä¼šåå‘æŸ¥æ‰¾æ‰€æœ‰çš„æŒ‡é’ˆï¼Œå°†æŒ‡é’ˆç½®ä¸ºnilã€‚è¿™é‡Œobj0 æ˜¯ä¸ªå¸¸é‡ï¼Œä¸ä¼šè¢«é‡Šæ”¾ï¼Œæ‰€ä»¥obj1ä¸ä¼šé‡Šæ”¾ obj2 å½“å¯¹è±¡ç”¨å®Œå°±ä¼šé‡Šæ”¾ obj3 è¿™è¡Œè¯­å¥ç»“æŸå°±ä¼šé‡Šæ”¾ obj4 å®šä¹‰åœ¨ä¸€ä¸ªscopeé‡Œï¼Œscopeç»“æŸå°±ä¼šé‡Šæ”¾ obj5 ä¼šåŠ åˆ°è‡ªåŠ¨é‡Šæ”¾æ± ä¸­ï¼Œä¼šåœ¨æœ€è¿‘çš„AutoreleasePool popè¢«é‡Šæ”¾ obj6 å¯èƒ½éšæ—¶éƒ½ä¼šè¢«é‡Šæ”¾ UIViewControllerè¿™æ ·å†™ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ 1234- (void)viewDidLoad &#123; [super viewDidLoad]; self.view = nil;&#125; ç¬¬ä¸€æ¬¡self.view æ—¶ä¼šè°ƒç”¨loadViewæ–¹æ³•åŠ è½½view ï¼Œå½“åŠ è½½ç»“æŸåŽä¼šè°ƒç”¨viewDidLoadã€‚æœ‰å¯èƒ½é€’å½’è°ƒç”¨ï¼Œä½†æ˜¯å¦‚æžœä¹‹åŽæ²¡æœ‰æ“ä½œself.view å°±ä¸ä¼šé€’å½’ï¼Œå±å¹•ä¸Šå›žé»‘å±ã€‚ UITableViewUITableViewDataSource å’Œ UITableViewDelegate ä¸­çš„ä¸»è¦æ–¹æ³•æœ‰å“ªäº›ï¼Œè°ƒç”¨é¡ºåºå’Œæ—¶æœºæ˜¯æ€Žæ ·çš„ï¼Ÿ block å†…å­˜ç®¡ç†å¦‚ä½•è§£å†³ä¸‹é¢ä»£ç çš„é—®é¢˜ 12345- (void)blockRetailCycleProblem&#123; self.block = ^&#123; NSLog(@"%@",@[self]); &#125;&#125; è§£å†³æ–¹æ¡ˆï¼š 123456- (void)blockRetainCycleAnswer0&#123; __weak typeof(self) weakSelf; self.block = ^&#123; NSLog(@"%@",@[weakSelf]); &#125;&#125; 1234567- (void)blockRetainCycleAnswer1&#123; __weak typeof(self) weakSelf; self.block = ^&#123; __weak typeof(weakSelf) strongSelf = weakSelf; NSLog(@"%@",@[weakSelf]); &#125;&#125; 123456789- (void)blockRetainCycleAnswer2&#123; __weak typeof(self) weakSelf; self.block = ^&#123; __weak typeof(weakSelf) strongSelf = weakSelf; if(strongSelf)&#123; NSLog(@"%@",@[strongSelf]); &#125; &#125;&#125; å‰ä¸¤ç§éƒ½æœ‰weakself éƒ½æœ‰æå‰è¢«é‡Šæ”¾çš„å¯èƒ½ï¼Œä¼šå¯¼è‡´crashï¼Œç¬¬ä¸‰ç§æ¯”è¾ƒå…¨é¢ block å†…å­˜ç®¡ç† Extensionä¸‹é¢çš„ self ç”¨ä¸ç”¨ weak ï¼Ÿ 12345- (void)blockRetainCycleProblemExt&#123; [UIView animateWithDuration:1 animations:^&#123; self.view.frame = CGRectMake(1,2,3,4); &#125;]&#125; é‚£è¿™ä¸ªå‘¢ï¼Ÿ 123[UIView animateWithDuration:1 delay:10000 options:0 animations:^&#123; self.view.frame = CGRectMake(1,2,3,4);&#125;] åŠ¨ç”»block æ˜¯çž¬é—´æ‰§è¡Œçš„ï¼Œä¸ä¼šæŒæœ‰selfçš„ ä»£ç è§„èŒƒæ”¹é”™123456789101112131415typedef enum&#123; UserSex_Man, UserSex_woman&#125;UserSex;@interface UserModel : NSObject@property(nonatomic, strong) NSString* name;@property (assign, nonatomic) int age;@property (nonatomic, assign) UserSex sex;- (id)initUserModelWithUserName:(NSString*)name withAge:(int)age;- (void)doLogin;@end ä¿®æ”¹å¦‚ä¸‹ï¼š 1234567891011121314151617181920typedef NS_ENUM(NSUInteger, XXUserGender)&#123; XXUserGenderUndefine, XXUserGenderMale, XXUserGenderFemale, XXUserGenderSark&#125;;@interface XXUserModel : NSObject@property (nonatomic, copy) NSString* identifier;@property (nonatomic, copy) NSString* name;@property (nonatomic, assign) NSUInteger age;@property (nonatomic, assign) XXUserGender sex;+ (instancetype)modelWithIdentifier:(NSString *)identifier;- (void)login;@end ç†è§£åº”ç”¨æž¶æž„ MVC å’ŒMVVM çš„ç†è§£ Stack å’Œ Heap åˆ†åˆ«çš„ä½¿ç”¨ï¼Œå¦‚æžœç®¡ç†ï¼Ÿ ARC æ˜¯å¦‚ä½•å®žçŽ°çš„ï¼Ÿ Autorelease å¯¹è±¡ä½•æ—¶é‡Šæ”¾ï¼Ÿ AutoreleasePool æ˜¯å¦‚ä½•å®žçŽ°çš„ ç†è§£Class ä¸Žå¯¹è±¡æ¨¡åž‹ ç†è§£RunLoop æ·±å…¥ç†è§£æ¶ˆæ¯æœºåˆ¶é—®é¢˜ï¼šä»Žå†™å…¥[obj foo] è¿™è¡Œä»£ç çŸ¥é“è¿è¡Œæ—¶foo è¢«è°ƒç”¨ï¼Œå°½é‡è¯¦ç»†æè¿°ä¸­é—´éƒ½å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ 12æŽŒæ¡ï¼šobjc_msgSend çš„å…³é”®è°ƒç”¨ï¼ŒåŽç»­å¦‚ä½•é€šè¿‡selector ä»Žisa æ‰¾åˆ°IMP ,è‹¥è¿è¡Œæ—¶æ²¡æœ‰æ‰¾åˆ°foo ä¼šå¦‚ä½•ï¼Ÿç²¾é€šï¼šç¼–è¯‘å™¨å¦‚ä½•ç¼–è¯‘æˆobjc_msgSendã€æ¶ˆæ¯cache æœºåˆ¶ã€æ¶ˆæ¯è½¬å‘æœºåˆ¶ã€objc_msgSend çš„å„ä¸ªç‰ˆæœ¬ã€objc_msgSend çš„å®žçŽ°ã€è·³æ¿æœºåˆ¶ç­‰ é­”æ³•æ•°å­—12345//64ä½ï¼Œä¸‹é¢ä¼šè¾“å‡ºä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆï¼Ÿ- ï¼ˆvoidï¼‰magicNumberProblem&#123; //Tagged Pointer NSLog(@"%@",11529223390768879413UL);&#125; è¾“å‡ºsunny,åœ¨64ä½ä¸‹ï¼ŒæŒ‡é’ˆçš„ç©ºé—´å¾ˆå¤§ï¼Œæ¯”å®žé™…æŒ‡å‘çš„å€¼è¿˜å¤§ï¼Œæ‰€ä»¥é‡‡ç”¨Tagged Pointer æœºåˆ¶ï¼Œç›´æŽ¥åœ¨æŒ‡é’ˆçš„åœ°å€é‡Œå­˜æ”¾å€¼ã€‚ å¦è¾Ÿè¹Šå¾„çš„block è°ƒç”¨1234void (^block)(void) = ^&#123; NSLog(@"block get called");&#125;ç¦æ­¢è°ƒç”¨block(); ç­”ï¼š 123[UIView animateWithDuration:1 animations:block];//ordispatch_async(dispatch_get_main_queue(), block); 1[[NSBlockOperation blockOperationWithBlock:block] start]; 123456789[[NSInvocation invocationWithMethodSignature:[NSMethodSignatrue signatureWithObjCTypes:"v@?"]] invokeWithTarget:block];//"v@?" ä¸ºblock çš„ç­¾å v è¡¨ç¤ºè¿”å›žå€¼ï¼Œ@?è¡¨ç¤ºç¬¬ä¸€ä¸ªå‚æ•° ä¸ºblock æœ¬èº«//NSInvocation ä¸€èˆ¬ç”¨æ³•NSMethodSignature *signature = [self methodSignatureForSelector:@selector(description)];NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:signature];invocation.target = self;invocation.selector = @selector(description);[invocation invoke]; 123456789//æ¯”è¾ƒé»‘[block invoke];//block æ˜¯NSBlock ç±»åž‹//ç»æŸ¥æ‰¾NSBlock é‡Œæœ‰è¿™äº›å®žä¾‹æ–¹æ³•- (void)copy;- (void)copyWithZone:(&#123;_NSZone=&#125; *)arg0;- (void)invoke;- (void)performAfterDelay:(double)arg0; 12345678910111213//æ›´é»‘//Blockå†…éƒ¨ç»“æž„struct Block layout&#123; void *isa; volatile int32_t flag; int32_t reserved; void (*invoke)(void *,...); struct Block_descriptor_1 *descriptor;&#125;;void *pBlock = (__bridge void*)block;//å–åˆ°blockçš„é¦–åœ°å€void (*invoke)(void *,...) = *((void **)pBlock + 2);//å–åˆ°invokeå‡½æ•°çš„åç§»é‡åœ°å€ 32ä½åŠ 3invoke(pBlock); 12//èŠ‚ç‚¹__strong void(^cleaner)(void) __attribute__((cleanup(blockCleanUp), unused)) = block; 1asm("callq *0x10(%rax)");//æ±‡ç¼– çœŸæ­£è°ƒç”¨æ–¹å¼ è°ˆè°ˆiOS è¿›é˜¶ è¦åŽ»è”æƒ³ã€ç†è§£ã€æœ‰è‡ªå·±çš„æ€è€ƒã€å¯¹æŠ€æœ¯çš„ä¸»è§ æŠ½è±¡ã€é¢†æ‚Ÿã€ç±»æ¯”èƒ½åŠ› çœ‹ä¹¦ã€çœ‹åšå®¢ã€å®žæˆ˜æ€»ç»“ã€åˆ¨æ ¹é—®åº• è¿›é˜¶é€Ÿåº¦çº¯æ—¥å¸¸å¼€å‘ &lt; çº¯çœ‹ä¹¦ã€åšå®¢ &lt; è‡ªå·±è¯•éªŒã€Demo &lt; å†™åšå®¢ &lt; ç³»ç»Ÿæ€§åˆ†äº«å’Œè®¨è®º &lt; æä¾›å®Œæ•´çš„å¼€æºæ–¹æ¡ˆ å¯¹æŠ€æœ¯ä¿æŒå¥½å¥‡ å¯¹åŽŸç†åˆ¨æ ¹é—®åº• ä¸ç”˜äºŽé‡å¤åŠ³åŠ¨ å¤šæ€è€ƒï¼Œå¤šæ€€ç–‘ ç›¸ä¿¡å®žè·µï¼Œä¸è¦è½»ä¿¡â€å¤§ç¥žâ€]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Effective Objective-C 2.0 ç¬”è®°]]></title>
      <url>%2F2016%2F10%2F24%2FEffective%20Objective-C%202.0%20%E7%AC%94%E8%AE%B0%2F</url>
      <content type="text"><![CDATA[ç¬¬ä¸€ç« 1. Objective-C ä½¿ç”¨çš„æ˜¯æ¶ˆæ¯ç»“æž„è€Œéžå‡½æ•°è°ƒç”¨ï¼Œå…¶åŒºåˆ«åœ¨äºŽï¼š æ¶ˆæ¯ç»“æž„çš„è¯­è¨€ï¼Œå…¶è¿è¡Œæ—¶æ‰€åº”æ‰§è¡Œçš„ä»£ç ç”±è¿è¡ŒçŽ¯å¢ƒå†³å®šï¼Œç¼–è¯‘å®Œå¹¶ä¸çŸ¥é“åº”è¯¥æ‰§è¡Œå“ªä¸ªæ–¹æ³•ï¼Œå³è¿è¡Œæ—¶ç»‘å®š å‡½æ•°è°ƒç”¨çš„è¯­è¨€ï¼Œç”±ç¼–è¯‘å™¨å†³å®šï¼Œä¹Ÿå°±æ˜¯ç¼–è¯‘å®Œå°±çŸ¥é“åº”è¯¥æ‰§è¡Œé‚£ä¸ªæ–¹æ³• 2.å†…å­˜1NSString *someString = @"The String"; å¯¹è±¡æ‰€å å†…å­˜æ€»æ˜¯åˆ†é…åœ¨å †ç©ºé—´(heap space)ï¼Œè€Œç»ä¸ä¼šåˆ†é…åœ¨æ ˆ(stack)ä¸Šã€‚ 1NSString *anotherString = someString; ä¸¤ä¸ªå˜é‡éƒ½æŒ‡å‘æ­¤å®žä¾‹ï¼Œè¿™è¯´æ˜Žå½“å‰æ ˆå¸§(stack frame)é‡Œåˆ†é…äº†ä¸¤å—å†…å­˜ï¼Œæ¯å—å†…å­˜çš„å¤§å°éƒ½èƒ½å®¹ä¸‹ä¸€æžšæŒ‡é’ˆï¼ˆåœ¨32ä½æž¶æž„çš„è®¡ç®—æœºä¸Šæ˜¯4å­—èŠ‚ï¼Œ64ä½æ˜¯8å­—èŠ‚ï¼‰ï¼Œè¿™ä¸¤å—å†…å­˜é‡Œçš„å€¼éƒ½ä¸€æ ·ï¼Œå°±æ˜¯NSStringå®žä¾‹çš„å†…å­˜åœ°å€ã€‚ åˆ†é…åœ¨å †ä¸­çš„å†…å­˜å¿…é¡»ç›´æŽ¥ç®¡ç†ï¼Œåˆ†é…åœ¨æ ˆä¸Šçš„ç”¨äºŽä¿å­˜å˜é‡çš„å†…å­˜åˆ™ä¼šåœ¨å…¶æ ˆå¸§å¼¹å‡ºæ—¶è‡ªåŠ¨æ¸…ç† 3.ä½¿ç”¨å¯¹è±¡ä¼šæ¯”ä½¿ç”¨ç»“æž„ä½“æ€§èƒ½å·®å¯¹è±¡è¿˜éœ€è¦é¢å¤–çš„å¼€é”€ï¼Œä¾‹å¦‚åˆ†é…åŠé‡Šæ”¾å †å†…å­˜ç­‰ 4.å°½é‡ä½¿ç”¨@class å‰å‘å¼•ç”¨å½“åªéœ€è¦å£°æ˜Žç±»åž‹æ—¶ï¼Œç”¨@class ä¼šé¿å…ç¼–è¯‘.h é‡Œä¸å¿…è¦çš„ä¸œè¥¿ï¼Œä»Žè€Œå‡å°‘ç¼–è¯‘æ—¶é—´ 5.å¤šç”¨å­—é¢é‡è¯­æ³•1NSNumber *someNumber = @7; 123456id object1 = /*...*/id object2 = /*...*/id object3 = /*...*/NSArray *arrayA = [NSArray arrayWithObjects:object1,object2,object3,nil];NSArray *arrayB = @[object1,object2,object3]; å¦‚æžœobject2 æ˜¯nil,è€ŒarrayB ä¼šcrash ï¼Œä½†æ˜¯arrayWithObjects æ–¹æ³•ä¼šä¾æ¬¡å¤„ç†å„ä¸ªå‚æ•°ï¼Œç›´åˆ°å‘çŽ°nil ä¸ºæ­¢ï¼Œæ‰€ä»¥æœ€ç»ˆarrayA = @[ object1 ]ï¼Œç±»ä¼¼çš„æ–¹æ³•è¿˜æœ‰dictionaryWithObjectsAndKeys: 6.å¤šç”¨ç±»åž‹å¸¸é‡ï¼Œå°‘ç”¨#defineé¢„å¤„ç†æŒ‡ä»¤ä¾‹å¦‚å®šä¹‰ä¸€ä¸ªåŠ¨ç”»æ—¶é•¿ #define ANIMATION_DURATION 0.3 æœ€å¥½æ›¿æ¢æˆ static const NSTimeInterval kAnimationDuration = 0.3; staticè¡¨ç¤ºå…¶ä½œç”¨åŸŸä»…é™äºŽå½“å‰çš„ç›®æ ‡æ–‡ä»¶ä¸­ï¼Œå¦‚æžœä¸åŠ çš„è¯ï¼Œå¦‚æžœå…¶ä»–ç¼–è¯‘å•å…ƒä¹Ÿå£°æ˜Žäº†åŒåå˜é‡ï¼Œåˆ™ç¼–è¯‘å™¨ä¼šæŠ›å‡ºå¼‚å¸¸ å¦‚æžœåªæ˜¯åœ¨.mé‡Œå®šä¹‰çš„è¯ï¼Œæœ€å¥½åŠ ä¸Šk å‰ç¼€ï¼Œå¦‚æžœç±»å¤–å¯è§çš„è¯ä»¥ç±»åä¸ºå‰ç¼€ 12extern NSString* const XXStringConstant; NSString* const XXStringConstant = @"XXStringConstant"; æ­¤ç±»å¸¸é‡æ”¾åœ¨å…¨å±€ç¬¦å·è¡¨é‡Œï¼Œè¿™é‡Œçš„XXStringConstantå°±æ˜¯ä¸€ä¸ªâ€œä¸€ä¸ªå¸¸é‡ï¼Œè€Œè¿™ä¸ªå¸¸é‡æ˜¯æŒ‡é’ˆï¼ŒæŒ‡å‘NSString å¯¹è±¡â€ ç¬¬äºŒç« 1.å±žæ€§ @dynamic : å‘Šè¯‰ç¼–è¯‘å™¨ä¸éœ€è¦ç”Ÿæˆå­˜å–æ–¹æ³• @synthesize : åˆæˆå±žæ€§ firstName = _firstName; weak : éžæ‹¥æœ‰çš„å…³ç³»ï¼Œæ‰€æŒ‡å¯¹è±¡é­åˆ°æ‘§æ¯ï¼Œå±žæ€§ä¹Ÿä¼šæ¸…ç©º(nil) unsafe_unretained : å½“æ‰€æŒ‡å¯¹è±¡æ‘§æ¯æ—¶ï¼Œå±žæ€§å€¼ä¸ä¼šè‡ªåŠ¨æ¸…ç©º 2.ç­‰åŒæ€§ ç›¸åŒçš„å¯¹è±¡å¿…é¡»å…·æœ‰ç›¸åŒçš„å“ˆå¸Œå€¼ï¼Œä½†æ˜¯ä¸¤ä¸ªå“ˆå¸Œå€¼ç›¸åŒçš„å¯¹è±¡ä¸ä¸€å®šç›¸åŒ 1234567891011NSMutableSet * set = [NSMutableSet new];NSArray *arr1 = @[@1,@2];NSArray *arr2 = @[@1];[set addobject:arr1];[set addobject:arr2]; //set &#123;(1,2),(1)&#125;[arr2 addObject:@(2)]; //set &#123;(1,2),(1,2)&#125; å“ˆå¸Œå€¼æ”¹å˜äº†NSSet *set2 = [set copy]; // set &#123;(1,2)&#125; 3.ç±»æ—æ¨¡å¼ç±»æ—æ¨¡å¼å¯ä»¥æŠŠå®žçŽ°ç»†èŠ‚éšè—åœ¨ä¸€å¥—ç®€å•çš„å…¬å…±æŽ¥å£åŽé¢ 1+ (UIButton* )buttonWithType:(UIButtonType)type; è¯¥æ–¹æ³•æ‰€è¿”å›žçš„å¯¹è±¡ï¼Œå…¶ç±»åž‹å–å†³äºŽä¼ äºŽä¼ å…¥çš„æŒ‰é’®ç±»åž‹ï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆç±»åž‹ï¼Œéƒ½æ˜¯ç»§æ‰¿ä¸ŽUIButton; 4.åœ¨æ—¢æ—¢æœ‰ç±»ä¸­ä½¿ç”¨å…³è”å¯¹è±¡å­˜æ”¾è‡ªå®šä¹‰æ•°æ® â€œå…³è”å¯¹è±¡ï¼ˆAssociated Object ï¼‰â€å­˜å‚¨ç­–ç•¥ (Storage Policy) å…³è”ç±»åž‹ ç­‰æ•ˆçš„@property å±žæ€§ OBJC_ASSOCIATION_ASSIGN assign OBJC_ASSOCIATION_RETAIN_NONATOMIC nonatomic,retain OBJC_ASSOCIATION_COPY_NONATOMIC nonatommic,copy OBJC_ASSOCIATION_RETAIN retain OBJC_ASSOCIATION_COPY copy 1void objc_setAssociatedObject(id object,void*key,id value,objc_AssociationPolicy policy) ä»¥ç»™å®šçš„é”®å’Œç­–ç•¥ä¸ºæŸå¯¹è±¡è®¾ç½®å…³è”å¯¹è±¡å€¼ 1id objc_getAssociatedObject(id object,void*key) æ ¹æ®ç»™å®šçš„é”®å’Œç­–ç•¥ä¸ºæŸå¯¹è±¡è®¾ç½®å…³è”å¯¹è±¡å€¼ 1void objc_removeAssociatedObjects(id object) ç§»é™¤æŒ‡å®šå¯¹è±¡çš„å…¨éƒ¨å…³è”å¯¹è±¡ key: static void* associatedKey = @&quot;associatedKey&quot; å¤šæ¬¡ä½¿ç”¨alertè§†å›¾æ—¶ï¼Œä½¿ç”¨æ­¤æ–¹æ³•è¾ƒå¥½ 5.ç†è§£objc_msgSend çš„ä½œç”¨1void objc_msgSend(id self, SEL cmd, ...) è¿™æ˜¯ä¸ªâ€œå‚æ•°ä¸ªæ•°å¯å˜çš„å‡½æ•°â€ï¼Œèƒ½æŽ¥å—ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„å‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°ä»£è¡¨æŽ¥æ”¶è€…ï¼Œç¬¬äºŒä¸ªå‚æ•°ä»£è¡¨æ–¹æ³•ï¼ŒåŽç»­å‚æ•°å°±æ˜¯æ¶ˆæ¯ä¸­çš„é‚£äº›å‚æ•° 1id returnValue = [someObject messageName:parameter]; ç¼–è¯‘å™¨ä¼šå°†è¿™ä¸ªæ¶ˆæ¯è½¬æ¢æˆå¦‚ä¸‹å‡½æ•°ï¼š 1id returnValue = objc_msgSend(someObject, @selecter(messageName:), parameter) è¯¥æ–¹æ³•éœ€è¦åœ¨æŽ¥æ”¶è€…æ‰€å±žçš„ç±»ä¸­æœå¯»å…¶æ–¹æ³•åˆ—è¡¨ï¼Œå¦‚æžœèƒ½æ‰¾åˆ°ä¸Žæ–¹æ³•åå­—ç›¸ç¬¦çš„æ–¹æ³•ï¼Œå°±è·³è‡³å…¶å®žçŽ°ä»£ç ï¼Œè‹¥æ˜¯æ‰¾ä¸åˆ°ï¼Œé‚£å°±æ²¿ç€ç»§æ‰¿ä½“ç³»ç»§ç»­å‘ä¸ŠæŸ¥æ‰¾ï¼Œç­‰æ‰¾åˆ°åˆé€‚çš„æ–¹æ³•ä¹‹åŽå†è·³è½¬ã€‚æœ€ç»ˆè¿˜æ˜¯æ²¡æœ‰æ‰¾åˆ°çš„è¯ï¼Œé‚£å°±æ‰§è¡Œæ¶ˆæ¯è½¬å‘ã€‚ objc_msgSendä¼šå°†åŒ¹é…ç»“æžœç¼“å­˜åœ¨å¿«é€Ÿæ˜ å°„è¡¨(fast map)é‡Œï¼Œæ¯ä¸ªç±»éƒ½æœ‰è¿™æ ·ä¸€å—ç¼“å­˜ï¼ŒåŠ å¿«æ‰§è¡Œé€Ÿåº¦ 6.ç†è§£æ¶ˆæ¯è½¬å‘æœºåˆ¶åœ¨ç¼–è¯‘æœŸå‘ç±»å‘é€äº†å…¶æ— æ³•è§£è¯»çš„æ¶ˆæ¯å¹¶ä¸ä¼šæŠ¥é”™ï¼Œå› ä¸ºåœ¨è¿è¡ŒæœŸå¯ä»¥ç»§ç»­å‘ç±»ä¸­æ·»åŠ æ–¹æ³•ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æœŸè¿˜æ— æ³•ç¡®å®šç±»ä¸­åˆ°åº•ä¼šä¸ä¼šæœ‰æŸä¸ªæ–¹æ³•çš„å®žçŽ°ã€‚å½“å¯¹è±¡æŽ¥æ”¶åˆ°æ— æ³•è§£è¯»çš„æ¶ˆæ¯åŽï¼Œå°±ä¼šå¯åŠ¨æ¶ˆæ¯è½¬å‘æœºåˆ¶ï¼Œç¨‹åºå‘˜å¯ç»æ­¤è¿‡ç¨‹å‘Šè¯‰å¯¹è±¡åº”è¯¥å¦‚ä½•å¤„ç†æœªçŸ¥æ¶ˆæ¯ã€‚ æ¶ˆæ¯è½¬å‘åˆ†ä¸ºä¸¤å¤§é˜¶æ®µï¼š ç¬¬ä¸€é˜¶æ®µå…ˆå¾è¯¢æŽ¥æ”¶è€…ï¼Œæ‰€å±žçš„ç±»ï¼Œçœ‹å…¶æ˜¯å¦èƒ½åŠ¨æ€æ·»åŠ æ–¹æ³•ï¼Œä»¥å¤„ç†å½“å‰è¿™ä¸ªæœªçŸ¥çš„é€‰æ‹©å­ï¼Œè¿™å«åšâ€œåŠ¨æ€æ–¹æ³•è§£æžâ€ ç¬¬äºŒé˜¶æ®µæ¶‰åŠâ€œå®Œæ•´çš„æ¶ˆæ¯è½¬å‘æœºåˆ¶â€ã€‚å¦‚æžœruntime å·²ç»æŠŠç¬¬ä¸€é˜¶æ®µæ‰§è¡Œå®Œäº†ï¼Œé‚£ä¹ˆæŽ¥æ”¶è€…è‡ªå·±å°±æ— æ³•å†ä»¥åŠ¨æ€æ–°å¢žæ–¹æ³•çš„æ‰‹æ®µæ¥å“åº”åŒ…å«è¯¥é€‰æ‹©å­çš„æ¶ˆæ¯äº†ï¼Œæ­¤æ—¶runtime ä¼šè¯·æ±‚æŽ¥æ”¶è€…ä»¥å…¶ä»–æ‰‹æ®µæ¥å¤„ç†è¯¥æ¶ˆæ¯ã€‚è¿™åˆåˆ†ä¸ºä¸¤å°æ­¥ï¼š é¦–å…ˆï¼Œè¯·æŽ¥æ”¶è€…çœ‹çœ‹æœ‰æ²¡æœ‰å…¶ä»–å¯¹è±¡èƒ½å¤„ç†è¿™æ¡æ¶ˆæ¯ï¼Œè‹¥æœ‰ï¼Œåˆ™runtime ä¼šæŠŠè¿™æ¡æ¶ˆæ¯è½¬ç»™é‚£ä¸ªå¯¹è±¡ï¼ŒäºŽæ˜¯æ¶ˆæ¯è½¬å‘ç»“æŸï¼Œä¸€åˆ‡å¦‚å¸¸ã€‚è‹¥æ²¡æœ‰â€œå¤‡æ´çš„æŽ¥æ”¶è€…â€ï¼Œåˆ™å¯åŠ¨å®Œæˆçš„æ¶ˆæ¯è½¬å‘æœºåˆ¶ï¼Œruntime ä¼šæŠŠä¸Žæ¶ˆæ¯æœ‰å…³çš„å…¨éƒ¨ç»†èŠ‚å°è£…åˆ°NSIvocation å¯¹è±¡ä¸­ï¼Œå†ç»™æŽ¥æ”¶è€…æœ€åŽä¸€æ¬¡æœºä¼šï¼Œä»¤å…¶è®¾æ³•è§£å†³å½“å‰è¿˜æœªå¤„ç†çš„è¿™æ¡æ¶ˆæ¯ åŠ¨æ€æ–¹æ³•è§£æžå¯¹è±¡åœ¨æ”¶åˆ°æ— æ³•è§£è¯»çš„æ¶ˆæ¯åŽï¼Œé¦–å…ˆå°†è°ƒç”¨å…¶æ‰€å±žç±»çš„ä¸‹åˆ—ç±»æ–¹æ³•ï¼š 1+ (BOOL)resolveInstanceMethed:(SEL)selector; è¡¨ç¤ºè¿™ä¸ªç±»æ˜¯å¦èƒ½æ–°å¢žä¸€ä¸ªå®žä¾‹æ–¹æ³•ç”¨ä»¥å¤„ç†æ­¤é€‰æ‹©å­ã€‚å¦‚æžœæ˜¯ç±»æ–¹æ³•ï¼Œruntime ä¼šè°ƒç”¨ä¸€ä¸ªç±»ä¼¼çš„æ–¹æ³•ï¼Œå«resolveClassMethod: å¤‡æ´æŽ¥æ”¶è€…ç¬¬äºŒæ¬¡å¤„ç†æœªçŸ¥é€‰æ‹©å­çš„æœºä¼šï¼Œruntime ä¼šè¯¢é—®ç±»ï¼šèƒ½ä¸èƒ½æŠŠè¿™æ¡æ¶ˆæ¯è½¬ç»™å…¶ä»–æŽ¥æ”¶è€…æ¥å¤„ç†ã€‚ 1- (id)forwardingTargetForSelector: (SEL)selector; è‹¥å½“å‰æŽ¥æ”¶è€…èƒ½æ‰¾åˆ°å¤‡æ´å¯¹è±¡ï¼Œåˆ™å°†å…¶è¿”å›žï¼Œè‹¥æ‰¾ä¸åˆ°ï¼Œè¿”å›žnilã€‚é€šè¿‡æ­¤æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯ä»¥ç”¨â€œç»„åˆâ€æ¥æ¨¡æ‹Ÿå‡ºâ€œå¤šé‡ç»§æ‰¿â€çš„æŸäº›ç‰¹æ€§ã€‚åœ¨ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨ï¼Œå¯èƒ½è¿˜æœ‰ä¸€ç³»åˆ—å…¶ä»–å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å¯ç»ç”±æ­¤æ–¹æ³•å°†èƒ½å¤„ç†é€‰æ‹©å­çš„ç›¸å…³å†…éƒ¨å¯¹è±¡è¿”å›žï¼Œåœ¨å¤–ç•Œçœ‹æ¥ï¼Œå¥½åƒæ˜¯è¯¥å¯¹è±¡äº²è‡ªå¤„ç†äº†æ¶ˆæ¯ã€‚ å®Œæ•´çš„æ¶ˆæ¯è½¬å‘å¦‚æžœè½¬å‘ç®—æ³•èµ°åˆ°è¿™ä¸€æ­¥ï¼Œé‚£ä¹ˆå”¯ä¸€èƒ½åšçš„å°±æ˜¯å¯ç”¨å®Œæ•´çš„æ¶ˆæ¯è½¬å‘æœºåˆ¶äº†ï¼Œé¦–å…ˆåˆ›å»ºNSIvocation å¯¹è±¡ï¼ŒæŠŠä¸Žå°šæœªå¤„ç†çš„é‚£æ¡æ¶ˆæ¯æœ‰å…³çš„å…¨éƒ¨ç»†èŠ‚å°äºŽå…¶ä¸­ï¼Œæ­¤å¯¹è±¡åŒ…å«é€‰æ‹©å­ï¼Œç›®æ ‡åŠå‚æ•°ã€‚åœ¨è§¦å‘NSInvocation å¯¹è±¡æ—¶ï¼Œâ€œæ¶ˆæ¯æ´¾å‘ç³»ç»Ÿâ€å°†äº²è‡ªå‡ºé©¬ï¼ŒæŠŠæ¶ˆæ¯æŒ‡æ´¾ç»™ç›®æ ‡å¯¹è±¡ã€‚ç›¸å½“äºŽåªæ˜¯æ”¹å˜äº†è°ƒç”¨ç›®æ ‡ã€‚ 1-(void)forwardInvocation:(NSInvocation *)invocation; ç»§æ‰¿ä½“ç³»ä¸­çš„æ¯ä¸ªç±»éƒ½æœ‰æœºä¼šå¤„ç†æ­¤è°ƒç”¨è¯·æ±‚ï¼Œç›´è‡³NSObject,ç»§è€Œè°ƒç”¨doesNotRecognizeSelector:ä»¥æŠ›å‡ºå¼‚å¸¸ï¼Œè¡¨ç¤ºæœ€ç»ˆæœªèƒ½å¾—åˆ°å¤„ç†ã€‚ ###æ¶ˆæ¯è½¬å‘å…¨æµç¨‹ æ–¹æ³•è°ƒé…æŠ€æœ¯ (Method swizzling)ç±»çš„æ–¹æ³•åˆ—è¡¨ä¼šæŠŠé€‰æ‹©å­çš„åç§°æ˜ å°„åˆ°ç›¸å…³çš„æ–¹æ³•å®žçŽ°ä¸Šï¼Œä½¿å¾—â€œåŠ¨æ€æ¶ˆæ¯æ´¾å‘ç³»ç»Ÿâ€èƒ½å¤Ÿæ ¹æ®æ­¤æ‰¾åˆ°åº”è¯¥è°ƒç”¨çš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•å‡ä»¥å‡½æ•°æŒ‡é’ˆçš„å½¢å¼æ¥è¡¨ç¤ºï¼Œè¿™ç§æŒ‡é’ˆå«åšIMPï¼ŒåŽŸåž‹å¦‚ä¸‹ï¼š 1id (*IMP)(id, SEL, ...) runtimeæä¾›äº†ä¸€äº›æ–¹æ³•æ¥æ“ä½œè¿™å¼ è¡¨ 123Method originMethod = class_getInstanceMethod([NSString class], @selector(lowercaseString));Method swappedMethod = class_getInstanceMethod([NSString class], @selector(uppercaseString));method_exchangeImplementations(originMethod, swappedMethod); 12345- (NSString* )my_lowercaseString&#123; NSString* lowercaser = [self my_lowercaseString]; NSLog(@"%@ =&gt; %@",self,lowercase); return lowercase;&#125; å°†ä¸Šé¢æ–¹æ³•å’ŒNSString çš„lowercaseString æ–¹æ³•äº’æ¢ï¼Œè¿™æ®µä»£ç çœ‹ä¸ŠåŽ»ä¼šæ­»å¾ªçŽ¯ï¼Œä½†æ˜¯ï¼Œåœ¨è¿è¡ŒæœŸé—´ï¼Œmy_lowercaseString çš„é€‰æ‹©å­å®žé™…å¯¹åº”çš„æ˜¯lowercaseString ã€‚é€šå¸¸å¼€å‘è€…å¯ä»¥åœ¨è°ƒè¯•é˜¶æ®µåˆ©ç”¨è¿™ä¸ªæ–¹æ³•æ¥ä¸ºé‚£äº›â€œå®Œå…¨ä¸çŸ¥é“å®žçŽ°ç»†èŠ‚â€çš„æ–¹æ³•å¢žåŠ æ—¥å¿—è®°å½•åŠŸèƒ½ï¼Œä¸å®œæ»¥ç”¨ 7.ç†è§£ â€œç±»å¯¹è±¡â€ çš„ç”¨æ„idç±»åž‹å®šä¹‰å¦‚ä¸‹ï¼š 123typedef struct objc_object&#123; Class isa;// "is a"æŒ‡é’ˆï¼Œå®šä¹‰äº†å¯¹è±¡æ‰€å±žçš„ç±»&#125; *id; Class å¯¹è±¡å®šä¹‰å¦‚ä¸‹ï¼š 12345678910111213typedef struct objc_class *Classstruct objc_class&#123; Class isa;// "is a"æŒ‡é’ˆï¼Œå®šä¹‰äº†å¯¹è±¡æ‰€å±žçš„ç±» Class super_class; const char *name; long version; long info; long instance_size; struct objc_ivar_list *ivars; struct objc_method_list **methodLists; struct obcj_cache *cache; struct objc_protocol_list *protocols;&#125;; ç±»å¯¹è±¡æ‰€å±žçš„ç±»åž‹å«åšå…ƒç±»ï¼Œç”¨æ¥è¡¨è¿°ç±»å¯¹è±¡æœ¬èº«æ‰€å…·å¤‡çš„å…ƒæ•°æ®ã€‚æ¯ä¸ªç±»æ—¢æœ‰ä¸€ä¸ªâ€œç±»å¯¹è±¡â€ï¼Œè€Œæ¯ä¸ªâ€œç±»å¯¹è±¡â€ä»…æœ‰ä¸€ä¸ªä¸Žä¹‹ç›¸å…³çš„â€œå…ƒç±»â€ã€‚ ç»§æ‰¿ä½“ç³»å¦‚ä¸‹ï¼š æ¯”è¾ƒå¯¹è±¡æ˜¯å¦ç­‰åŒé™¤äº† isKindOfClass:è¿˜å¯ä»¥ç”¨æ¯”è¾ƒç±»å¯¹è±¡æ˜¯å¦ç›¸åŒï¼ŒåŽŸå› åœ¨äºŽï¼Œç±»å¯¹è±¡æ˜¯â€œå•ä¾‹â€ï¼Œæ¯ä¸ªç±»çš„Class ä»…æœ‰ä¸€ä¸ªå®žä¾‹ã€‚ 1234id object = /* ... */;if ([object class] == [SomeClass class])&#123; // 'object is an instance of SomeClass'&#125; è™½ç„¶èƒ½è¿™æ ·æ¯”è¾ƒï¼Œä½†ä¸æŽ¨èã€‚ä¾‹å¦‚ï¼ŒæŸä¸ªå¯¹è±¡å¯èƒ½ä¼šæŠŠå…¶æ”¶åˆ°çš„æ‰€æœ‰é€‰æ‹©å­éƒ½è½¬å‘åˆ°å¦ä¸€ä¸ªå¯¹è±¡ã€‚è¿™æ ·çš„å¯¹è±¡å«åšâ€œä»£ç†(proxy)â€œï¼Œæ­¤ç§å¯¹è±¡å‡ä»¥NSProxy ä¸ºæ ¹ç±»ã€‚å¦‚æžœåœ¨è¿™ç§å¯¹è±¡ä¸Šè°ƒç”¨class æ–¹æ³•ï¼Œé‚£ä¹ˆè¿”å›žçš„æ˜¯ä»£ç†å¯¹è±¡æœ¬èº«(æ­¤ç±»æ˜¯NSProxy çš„å­ç±»)ï¼Œè€ŒéžæŽ¥å—ä»£ç†çš„å¯¹è±¡æ‰€å±žçš„ç±»ï¼Œç„¶è€Œæ”¹ç”¨isKindOfClass:å°±èƒ½æŠŠè¿™æ¡æ¶ˆæ¯è½¬ç»™æŽ¥å—ä»£ç†çš„å¯¹è±¡ã€‚ 8.Block1.å—çš„å†…éƒ¨ç»“æž„å—æœ¬èº«ä¹Ÿæ˜¯å¯¹è±¡ï¼Œåœ¨å­˜æ”¾å—å¯¹è±¡çš„å†…å­˜åŒºåŸŸä¸­ï¼Œé¦–ä¸ªå˜é‡æ˜¯æŒ‡å‘Class å¯¹è±¡çš„æŒ‡é’ˆï¼Œå«åšisa ï¼Œå…¶ä½™å†…å­˜é‡Œå«æœ‰å—å¯¹è±¡æ­£å¸¸è¿è½¬æ‰€éœ€çš„å„ç§ä¿¡æ¯ã€‚ void* isa int flags int reserved void ()(void ,â€¦) invoke struct * descriptor æ•èŽ·åˆ°çš„å˜é‡ å…¶ä¸­æœ€é‡è¦çš„å°±æ˜¯invoke å˜é‡ï¼Œè¿™æ˜¯ä¸ªå‡½æ•°æŒ‡é’ˆï¼ŒæŒ‡å‘å—çš„å®žçŽ°ä»£ç ã€‚å‡½æ•°åŽŸåž‹è‡³å°‘è¦æŽ¥å—ä¸€ä¸ªvoid* åž‹çš„å‚æ•°ï¼Œæ­¤å‚æ•°ä»£è¡¨å—ã€‚descriptor å˜é‡æ˜¯æŒ‡å‘ç»“æž„ä½“çš„æŒ‡é’ˆï¼Œå…¶ä¸­å£°æ˜Žäº†å—å¯¹è±¡çš„æ€»ä½“çš„å¤§å°ï¼Œè¿˜å£°æ˜Žäº†copy ä¸Ždispose è¿™ä¸¤ä¸ªè¾…åŠ©å‡½æ•°æ‰€å¯¹åº”çš„å‡½æ•°æŒ‡é’ˆã€‚descriptor å¯¹åº”ç»“æž„å¦‚ä¸‹ï¼š unsigned long int reserved unsigned long int size void ()(void , void *) copy void ()(void , void *) dispose å—è¿˜ä¼šæŠŠå®ƒæ‰€æ•èŽ·çš„æ‰€æœ‰å˜é‡éƒ½æ‹·è´ä¸€ä»½ï¼Œè¿™äº›æ‹·è´éƒ½æ”¾åœ¨descriptor å˜é‡åŽé¢ï¼Œæ•èŽ·äº†å¤šå°‘ä¸ªå˜é‡ï¼Œå°±è¦å æ®å¤šå°‘å†…å­˜ç©ºé—´ã€‚æ³¨æ„ï¼Œæ‹·è´çš„å¹¶ä¸æ˜¯å¯¹è±¡æœ¬èº«ï¼Œè€Œæ˜¯æŒ‡å‘è¿™äº›å¯¹è±¡çš„æŒ‡é’ˆå˜é‡ã€‚invoke å‡½æ•°ä¹‹æ‰€ä»¥æŠŠå—å½“ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’è¿›æ¥ï¼ŒåŽŸå› åœ¨äºŽï¼Œæ‰§è¡Œå—æ—¶ï¼Œè¦ä»Žå†…å­˜ä¸­æŠŠè¿™äº›æ•èŽ·çš„å˜é‡è¯»å‡ºæ¥ã€‚ 2.å…¨å±€å—ã€æ ˆå—åŠå †å—å®šä¹‰å—çš„æ—¶å€™ï¼Œå…¶æ‰€å å†…å­˜åŒºåŸŸæ˜¯åˆ†é…åœ¨å æ ˆä¸­ï¼Œå—åªåœ¨å®šä¹‰å®ƒçš„é‚£ä¸ªèŒƒå›´å†…æœ‰æ•ˆã€‚ 1234567891011void (^Block)();if (/* some condition*/)&#123; block = ^&#123; NSLog(@"Block A"); &#125;;&#125;else&#123; block = ^&#123; NSLog(@"Block B"); &#125;&#125;block(); è¿™æ®µä»£ç å°±æœ‰å±é™©ï¼Œå®šä¹‰åœ¨if é‡Œé¢çš„Block éƒ½åˆ†é…åœ¨æ ˆå†…å­˜ä¸­ã€‚åœ¨ç¦»å¼€äº†if è¯­å¥åŽï¼Œç¼–è¯‘å™¨æœ‰å¯èƒ½æŠŠåˆ†é…åœ¨å—çš„å†…å­˜è¦†å†™æŽ‰ï¼Œå¯èƒ½å¯¼è‡´crashã€‚ä¸ºè§£å†³æ­¤é—®é¢˜ï¼Œå¯ä»¥ç»™å—å¯¹è±¡å‘é€copy æ¶ˆæ¯æ¥æ‹·è´ï¼Œè¿™æ ·å¯ä»¥æŠŠå—ä»Žæ ˆå¤åˆ¶åˆ°å †ä¸Šï¼Œå—å°±æˆäº†å¸¦å¼•ç”¨è®¡æ•°çš„å¯¹è±¡äº†ã€‚åŽç»­çš„æ‹·è´æ“ä½œéƒ½ä¸ä¼šçœŸçš„æ‰§è¡Œå¤åˆ¶ï¼Œåªæ˜¯é€’å¢žå—å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ã€‚ 1234567891011void (^Block)();if (/* some condition*/)&#123; block = [^&#123; NSLog(@"Block A"); &#125; copy];&#125;else&#123; block = [^&#123; NSLog(@"Block B"); &#125; copy]&#125;block(); 3.å…¨å±€å—123void (^Block)() = ^&#123; NSLog(@"This is a block"); &#125; ç”±äºŽåœ¨ç¼–è¯‘æœŸèƒ½ç¡®å®šå—æ‰€éœ€çš„å…¨éƒ¨ä¿¡æ¯ï¼Œæ‰€ä»¥å¯ä»¥æŠŠå®ƒåšæˆå…¨å±€å—ã€‚è¿™æ˜¯ç§ä¼˜åŒ–æŠ€æœ¯ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[èµ·æ­¥]]></title>
      <url>%2F2016%2F10%2F21%2F%E8%B5%B7%E6%AD%A5%2F</url>
      <content type="text"><![CDATA[èµ·æ­¥è¿™æ˜¯ä½¿ç”¨MWeb å†™çš„ç¬¬ä¸€ç¯‡æ–‡ç« ã€‚ä»Žäº‹iOS å¼€å‘ä¸€å¹´å¤šäº†ï¼Œä¸€ç›´ä¹Ÿæ²¡æœ‰ç³»ç»Ÿåœ°æ•´ç†æ‰€å­¦çš„çŸ¥è¯†ä»¥åŠè®°å½•è¸©è¿‡çš„å‘ï¼Œåœ¨å…¬å¸é‡Œä¸€ç›´ä¹Ÿåªæ˜¯åœ¨åšä¸šåŠ¡éœ€æ±‚ï¼Œæ²¡æœ‰æ¶‰åŠå¤§å¤šè®¾è®¡æ¨¡å¼ï¼Œåº•å±‚æ¡†æž¶çš„ä¸œè¥¿ï¼Œæ„Ÿè§‰è‡ªå·±ä¸€ç›´æ²¡æœ‰ä»€ä¹ˆæå‡ã€‚æ‰€ä»¥å†³å®šå¼€å§‹å†™ç‚¹ä»€ä¹ˆï¼Œå‘å¤§ç‰›å­¦ä¹ ï¼Œå¯èƒ½æ–‡ç« è´¨é‡ä¸æ€Žä¹ˆé«˜ï¼Œä½†è¿˜æ˜¯å¸Œæœ›è‡ªå·±èƒ½ä»ŽiOS å¼€å‘èœé¸Ÿç¨å¾®è¿›é˜¶ä¸€ä¸‹ã€‚ è®¡åˆ’ ä¹°çš„Effective Objective-C 2.0 ä¹¦ï¼Œè¿˜æ²¡æœ‰çœ‹å®Œï¼Œå‡†å¤‡å°†ä¹¦é‡Œçš„çŸ¥è¯†ç‚¹æ€»ç»“ä¸€ä¸‹ æ€»ç»“ä¸€ä¸‹å‡ å¤©å‰åœ¨è¶£ç›´æ’­å¹³å°ä¸Šæˆ‘å°±å«Sunnyæ€Žä¹ˆäº† çš„iOS é¢è¯•å°ç¶ç›´æ’­å†…å®¹ åŠ æ²¹å…ˆæŠŠè®¡åˆ’çš„è¿™ä¸¤ä»¶äº‹åšå¥½ï¼Œè¿˜æ˜¯è¦é™ä¸‹å¿ƒä¸€æ­¥æ­¥æ¥ï¼Œæ…¢æ…¢ç§¯ç´¯å§ã€‚ä½ è¿˜å·®çš„è¿œå‘¢ï¼]]></content>
    </entry>

    
  
  
</search>
